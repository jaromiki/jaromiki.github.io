<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	 <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1250">
 	 <meta name="Content-language" content="sk">	
	<title>Intervalové stromy</title>
	<LINK href="../css/style.css" type="text/css"  rel=stylesheet>
</head>

<body>
<h3>Intervalové stromy</h3>
<dl><dt>Pouitie - na rıchle spracovávanie a vyhodnocovanie intervalov
	<dd>Typické úlohy
	    <ul><li>Na vstupe sú intervaly a hodnoty, všetky èísla v danom intervale máme zväèši o danú hodnotu.
				<br>Potom zadáme èíslo a urèíme aká je v òom hodnota
				<br>Klasické riešenie O(k*n), kde k je poèet podintervalov
			<li>Je dané pole èísel (poèet èísel n), na vstupe sú príkazy 
				<ul><li>zmen i-te cislo
					<li>spoèítaj èísla od indexu a po b (k - takıch príkazov)
				</ul>
				Klasické riešenie ->Èasová zloitos - O(k*n)	
		</ul>
	<dt>Myšlienka - prejs na O(k*log n)
	<dd>Rozloíme interval na podintervaly (max. log poèet) a pre kadı podinterval vrátime vısledok v konštantnom èase
	<dt>Úloha	
	<dd>Na základnı interval &lt;a;b&gt; nám padajú podintervaly a hodnoty, ktoré všetkım èíslam v tıchto podintervaloch zväèšujú 
	hodnotu. Poèet celıch èísel v základnom intervale je b-a+1. My tento poèet zväèšíme 
	<ul><li>pridaním jedného èísla pred a
		<li>pridaním jedného èísla za b
		<li>ïalším pridaním èísel za b+1 tak aby poèet èísel bol mocninou 2
	</ul>
	<br>Je moné viacero konštrukcií - tu popíšem strom, ktorı budeme tvori v poli a prechádza "odspodu".
	<br>Strom je vytvorenı nasledovne:
	<br>v spodnom riadku stromu (listy) sú bunky s indexom z nášho základného intervalu a-1, a, a+1, ... b,b+1, ...
	<br>(za b+1 ešte môu by èísla do poètu nejakej mocniny 2)
	<br>sem (i do ostatnıch buniek stromu) )budeme pridáva hodnoty z "padajúcich" intervalov
	<br>o riadok vyššie je interval s hranicami danımi indexami v spodnom riadku /inak povedané zjednotenie mnoiny ¾avého a pravého syna
	<br>podobne je situácia aj v kadom vyššom riadku a po koreò
	<br>Keïe ide o úplnı strom, mono ho vıhodne zapísa do po¾a, postup je nasledovnı:
	<ul><li>koreò je v bunke 1
		<li>ak je prvok v bunke (i) tak jeho ¾avı syn je v bunke (2*i), jeho pravı syn je v bunke (2*i+1) 
		<li>ak je prvok v bunke (i) tak jeho rodiè je v bunke (i div 2)
		<li>spodnı riadok stromu (listy) zaèínajú od indexu (n) a konèia v bunke (2n-1)
		<li>je zrejmé, e ¾avı synovia sú na párnych adresách a pravı na nepárnych
	<ul>
	<h4>zadávanie intervalu do stromu </h4>
	Nech novı podinterval je &lt;x;y&gt; a pridávaná hodnota je h
	<br>nájdem adresu èísla (x-1) medzi listami i:=x-a+n; 
	<br>(napr. ak som zadal x=a, h¾adám kde leí a-1 ,èo je n-ty chlievik nášho po¾a)
	<br>podobne zistím, kde leí èíslo (y+1) j:=y-a+n+2
	<br>(napr. ak som zadal y=a, h¾adám kde leí a+1 ,èo je (n+2)-ty chlievik nášho po¾a)
	<br>Teraz obe èísla nechám naraz bubla hore kım nebudú ma rovnakého rodièa (kım sú od seba ïalej ako o 1 políèko)
	<br>ale pred posunom nahor zistím èi 
	<ul><li>ak i je ¾avı syn, tak do jeho pravého brata pripoèítam hodnotu h
		<li>ak j je pravı syn, tak do jeho ¾avého brata pripoèítam hodnotu h
	</ul>
	Napr. Nech základnı interval bol 2 a 15, po pridaní èísel pred a za máme èísla 1 a 16 a tie sú zadané listami stromu
	<br>&nbsp; &nbsp; &nbsp; Nech podinterval kde chceme pripoèíta hodnotu je 4 a 11
	<br>h¾adáme polohu èísla 3 ... i:=n+2
	<br>h¾adáme polohu èísla 12 ... j:=n+11
	<br>Pri bublaní nahor zmeníme hodnoty buniek oznaèené na obr1 rámikom 
	<br>obr.1<br> 	
	<img src="itree-3.png" width="514" height="158" border="0" alt="">	 
	<pre style="YES; font: monospace; margin-top: 0;" style=""> 1   2    3    4    5   6   7    8    9   10  11   12   13  14   15  16</pre>
	Celı interval 4-11 sme zapísali pomocou {4} + &lt;5;8&gt; + &lt;9;10&gt; + {11}
	<h4>Teraz ako urèíme aká hodnota je v èísle m z nášho základného intervalu?</h4>
	<ul><li>nájdeme adresu èísla m v listoch k:=m-a+n+1;
		<li>necháme ho prebubla a nahor
		<li>pri tejto ceste spoèítame všetky èísla, ktoré v bunkách nájdene
	</ul>
	Celá cesta je zachytená na obr.2 pre èíslo m=6	 
	<br>obr.2 	
	<img align="left" src="itree-2.png" width="516" height="158" border="0" alt="">

</body>
</html>
