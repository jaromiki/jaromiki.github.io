<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0036)http://www.delphi.input.sk/pz12.html -->
<HTML><HEAD><TITLE>12. Myš a èasovaè</TITLE>
<META http-equiv=content-type content="text/html; charset=windows-1250">
<META content="MSHTML 5.50.4522.1800" name=GENERATOR><LINK 
href="12_ Myš a èasovaè_soubory/default.css" rel=stylesheet>
<META content=a name=namo-theme>
<META content="Andrej Blaho" name=author>
<SCRIPT language=JavaScript>
<!--
function na_change_img_src(name, nsdoc, rpath, preload)
{ 
  var img = eval((navigator.appName.indexOf('Netscape', 0) != -1) ? nsdoc+'.'+name : 'document.all.'+name);
  if (name == '')
    return;
  if (img) {
    img.altsrc = img.src;
    img.src    = rpath;
  } 
}

function na_restore_img_src(name, nsdoc)
{
  var img = eval((navigator.appName.indexOf('Netscape', 0) != -1) ? nsdoc+'.'+name : 'document.all.'+name);
  if (name == '')
    return;
  if (img && img.altsrc) {
    img.src    = img.altsrc;
    img.altsrc = null;
  } 
}

// -->
</SCRIPT>
</HEAD>
<BODY text=#000000 vLink=gray aLink=green link=red bgColor=#f5f4d3 
background="12_ Myš a èasovaè_soubory/nth_a_bg.gif">
<TABLE cellSpacing=1 borderColorDark=gray width=750 borderColorLight=silver 
border=0>
  <TBODY>
  <TR>
    <TD align=middle><!--NAMO_NAVBAR_START B H    -->
      <DIV><IMG class=namo-banner alt="12. Myš a èasovaè" 
      src="12_ Myš a èasovaè_soubory/nav_a_pz12_bhb.gif" border=0 
      name=nav_pz12_BH0></DIV><!--NAMO_NAVBAR_END--></TD></TR>
  <TR>
    <TD vAlign=top align=middle>
      <P align=left><BR></P>
      <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center>
        <TBODY>
        <TR>
          <TD width=365><FONT size=2><!--NAMO_NAVBAR_START O P L h-->
            <DIV align=left><A href="http://www.delphi.input.sk/pz11.html"><IMG 
            src="12_ Myš a èasovaè_soubory/nth_a_back.gif" border=0></A><A 
            href="http://www.delphi.input.sk/index.html"><IMG 
            src="12_ Myš a èasovaè_soubory/nth_a_home.gif" border=0></A><A 
            href="http://www.delphi.input.sk/pz13.html"><IMG 
            src="12_ Myš a èasovaè_soubory/nth_a_next.gif" border=0></A></DIV><!--NAMO_NAVBAR_END--></FONT></TD>
          <TD width=365>
            <P class=namo-sublist align=right><FONT size=1><I>posledná zmena: 
            29.10.2001</I></FONT></P></TD></TR></TBODY></TABLE>
      <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
      cellPadding=3 width="100%" align=center borderColorLight=#ffe7a6 
        border=0><TBODY>
        <TR>
          <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
            <P align=right><B><IMG class=namo-bullet1 height=11 
            alt="Banner Text" src="12_ Myš a èasovaè_soubory/nth_a_bullet_l.gif" 
            width=11 border=0> 25.10.2001</B></P></TD></TR>
        <TR>
          <TD vAlign=top>
            <UL>
              <P class=namo-list><BR><FONT size=2><IMG height=7 
              src="12_ Myš a èasovaè_soubory/nth_a_bullet_s.gif" width=7 
              border=0> èo sme sa doteraz nauèili</FONT></P>
              <UL>
                <LI type=disc>do grafickej plochy zatia¾ vieme kresli pomocou 
                algoritmov </LI></UL>
              <P class=namo-list><FONT size=2><IMG height=7 
              src="12_ Myš a èasovaè_soubory/nth_a_bullet_s.gif" width=7 
              border=0> èo sa budeme dnes uèi</FONT></P>
              <UL type=disc>
                <LI>ako môeme pouívate¾ovi umoni kresli do grafickej plochy 
                pomocou myši </LI></UL></UL>
            <H2>Myš</H2>
            <UL type=disc>
              <LI>pri práci s <B>Pixels</B> v grafickej ploche sme trochu 
              experimentovali aj s myšou: pri pohyboch myšou nad grafickou 
              plochou Image2 sme zobrazovali príslušné bodky obrázka - vyuili 
              sme udalos <B>onMouseMove</B>, ktorá do obslunej procedúry 
              <B>Image2MouseMove</B> posiela aj súradnice myši v parametroch 
              <B>X</B> a <B>Y</B> 
              <LI>nauèíme sa, ako sa pracuje s myšou - grafická plocha má 3 
              rôzne udalosti: 
              <UL type=disc>
                <LI><B>onMouseDown</B> - zatlaèili sme nad plochou niektoré 
                tlaèidlo myši 
                <LI><B>onMouseMove</B> - myš sa hıbe nad plochou 
                <LI><B>onMouseUp</B> - pustili sme tlaèidlo myši </LI></UL>
              <LI>zaèneme najjednoduchším prípadom: &nbsp;vo formulári máme 
              grafickú plochu Image1 a priradíme jej udalos onMouseMove 
              (dvojklikneme na riadok s onMouseMove v záloke Events pre Image1 
              v Inšpektore objektov): </LI></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>pohyb myši kreslí bodky:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.Image1MouseMove(Sender:TObject; Shift:TShiftState; <B>X</B>,<B>Y</B>:Integer);
begin
  Image1.Canvas.Pixels[X,Y]:=clBlack;
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>pohybom myši na plochou sa na príslušnıch miestach zobrazujú 
              bodky 
              <LI>u sme si mono zvykli, e ve¾mi èasto, keï robíme s grafikou 
              a táto bliká, treba do FormCreate prida riadok: </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>aby grafická plocha neblikala:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.FormCreate(Sender: TObject);
begin
  DoubleBuffered:=true;
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>kreslením bodiek sa ve¾mi ako nieèo naozaj nakreslí, preto 
              sa môeme pokúsi namiesto bodky (Pixels) kresli èiary (LineTo): 
              </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>pohyb myši spája èiary:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.Image1MouseMove(Sender:TObject; Shift:TShiftState; X,Y:Integer);
begin
  Image1.Canvas.LineTo(X,Y);
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>teraz&nbsp;sa naozaj spájajú èiary pod¾a pohybu myši, lene 
              èiary sa kreslia aj keï sa tlaèidlo myši nezatlaèí 
              <LI>vyuijeme parameter <B>Shift</B>: je typu 
              <TT><B>TShiftState</B> a</TT> pre tento platí<BR><FONT 
              face="Courier New">&nbsp;&nbsp;type </FONT><TT><FONT 
              face="Courier New">TShiftState = set of 
              (ssShift,ssAlt,ssCtrl,ssLeft,ssRight,ssMiddle,ssDouble);</FONT></TT> 

              <LI>v tomto parametri sa môeme dozvedie èi sú zatlaèené tlaèidlá 
              na myši alebo niektoré špeciálne klávesy na klávesnici 
              <LI>vyuijeme to na to, e èiary sa kresli len, ak je zatlaèené 
              ¾avé tlaèidlo myši </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>kreslí sa len pri zatlaèenom tlaèidle myši:</I></U> 
                  </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.Image1MouseMove(Sender:TObject; Shift:TShiftState; X,Y:Integer);
begin
  if <B>Shift=[ssLeft]</B> then
    Image1.Canvas.LineTo(X,Y);
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>ešte stále to nie je správne riešenie - po zatlaèení tlaèidla 
              by sa grafické pero malo posunú do štartového bodu kreslenia, ale 
              bez spojenia s predchádzajúcim bodom - vyuijeme udalos 
              <B>onMouseDown</B>, v ktorej sa nastavíme do štartového bodu 
              pomocou <B>MoveTo</B> </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>pridáme zaèiatok kreslenej èiary:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.<B>Image1MouseDown</B>(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  if Shift=[ssLeft] then
    Image1.Canvas.<B>MoveTo</B>(X,Y);
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>toto riešenie môe niekedy robi problémy (vyskúšajte poèas 
              kreslenia zatlaèi kláves <B>Ctrl</B>), preto môeme poui 
              pomocnú logickú premennú <B>dole</B>, ktorá oznaèuje, èi práve 
              kreslíme (èi sme zaèali kresli) a ïalej sa u nepozerá na 
              parameter <B>Shift</B> </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>pouitie pomocnej premennej"</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>var
  <B>dole</B>:boolean = false;

procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton;
 				     Shift: TShiftState; X, Y: Integer);
begin
  dole:=Shift=[ssLeft];    <I><FONT color=navy>// alebo aj dole:=ssLeft in Shift;</FONT></I>
  if dole then Image1.Canvas.MoveTo(X,Y);
end;

procedure TForm1.Image1MouseMove(Sender:TObject; Shift:TShiftState; X,Y:Integer);
begin
  if dole then Image1.Canvas.LineTo(X,Y);
end;

procedure TForm1.Image1MouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  dole:=false;
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>v procedúre pre udalos onMouseMove môeme na nejaké miesto vo 
              formulári vypisova momentálnu pozíciu myši: 
              <LI>niekam do formulára umiestnime novı komponent <B>Label</B> - 
              text vo formulári -&nbsp;keï budeme meni jeho stavovú premennú 
              (property) <B>Caption</B>, bude sa meni jeho zobrazenie 
              </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>kontrolné vıpisy poèas pohybu myši nad grafickou 
                  plochou:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.Image1MouseMove(Sender:TObject; Shift:TShiftState; X,Y:Integer);
begin
  <B>Label1.Caption</B>:=IntToStr(X)+','+IntToStr(Y);
  ...
end;</PRE></TD></TR></TBODY></TABLE>
            <H2 align=left>Skicár - kresliaca aplikácia</H2>
            <P align=left>ïalej ukáeme postupnú konštrukciu jednoduchej 
            kresliacej aplikácie:</P>
            <UL>
              <DIV align=left>
              <LI>do formulára vloíme grafickú plochu (Image1), pod òu textovı 
              informaènı riadok (Label1), nad plochu tlaèidlo s textom 
              <B>zma</B> (Button1) </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>prvá verzia programu:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>var
  dole:boolean = false;

procedure TForm1.FormCreate(Sender: TObject);
begin
  DoubleBuffered:=true;
  Button1.Click;   <I><FONT color=navy>// zmae sa grafická plocha</FONT></I>
  Label1.Caption:='';
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  with Image1, Canvas do begin
    Brush.Color:=clWhite;
    Brush.Style:=bsSolid;
    FillRect(ClientRect);
  end;
end;

procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  dole:=ssLeft in Shift;
  if dole then Image1.Canvas.MoveTo(X,Y);
end;

procedure TForm1.Image1MouseMove(Sender: TObject; Shift: TShiftState;
  X,Y: Integer);
begin
  Label1.Caption:=IntToStr(X)+' '+IntToStr(Y);
  if dole then Image1.Canvas.LineTo(X,Y);
end;

procedure TForm1.Image1MouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  dole:=false;
end;</PRE></TD></TR></TBODY></TABLE>
            <DIV align=left>
            <H3>Paleta farieb</H3></DIV>
            <UL>
              <DIV align=left>
              <LI>druhım krokom bude pridanie farebnej palety, aby sme mohli 
              zvoli farbu kreslenia: </LI></DIV>
              <DIV align=left>
              <UL type=disc>
                <LI>nad grafickú plochu najprv poloíme menšiu grafickú plochu 
                <B>Image2</B>, ktorá bude obsahova nejakı obrázok palety (ak 
                pouijete bitmapu <A 
                href="http://www.delphi.input.sk/SUBORY/paleta.bmp">paleta.bmp</A>, 
                zvo¾te ve¾kos Image2 225x33) - umiestnite ju napr. úplne vpravo 

                <LI>pred Image2 polote malú plôšku <B>Image3</B>, napr. 
                ve¾kosti 25x25 - sem sa bude vykres¾ova aktuálna zvolená farba 
                - pri štarte programu èierna </LI></UL></DIV></UL>
            <DIV align=left>
            <LI>kliknutím do Image2 sa zvolí farba kresliaceho pera: nastaví sa 
            farba pera pre <B>Image1</B> a tie sa zafarbí <B>Image3</B>: 
            </LI></DIV>
            <UL></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>spracovanie vybranej farby pera:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.Image2MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  <B>Image1.Canvas.Pen.Color:=Image2.Canvas.Pixels[X,Y];
</B>
  with Image3, Canvas do begin
    Brush.Color:=Image1.Canvas.Pen.Color;
    FillRect(ClientRect);
  end;
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>asi by bolo dobré, keby bolo&nbsp;<B>Image3</B> zafarbené u 
              pri štarte programu: do <B>FormCreate</B> pridáme jeho zafarbenie 
              </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>inicializácia zobrazenia aktuálnej farby:</I></U> 
                </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.FormCreate(Sender: TObject);
begin
  ...
  with Image3, Canvas do begin
    Brush.Color:=Image1.Canvas.Pen.Color;
    FillRect(ClientRect);
  end;
end;</PRE></TD></TR></TBODY></TABLE>
            <H3 align=left>Posuvná lišta</H3>
            <UL type=disc>
              <DIV align=left>
              <LI>na nastavenie hrúbky pera môeme poui posuvnú lištu, napr. 
              komponent <B>TrackBar</B> (môete poui aj ScrollBar): 
              <UL type=disc>
                <LI><B>TrackBar1</B> poloíme na¾avo od Image3 a trochu 
                prispôsobíme jeho ve¾kos vo¾nej ploche vo formulári 
                <LI>ešte musíme zmeni dve stavové premenné (property) 
                <B>Min</B> a <B>Max</B>, ktoré vyjadrujú minimálnu a maximálnu 
                dosiahnute¾nú hodnotu pre posuvnú lištu - nastavíme <B>Min</B> 
                na 1 a <B>Max</B> napr. na 20 
                <LI>pre tento komponent vyuijeme udalos <B>onChange</B>, ktorá 
                je zavolaná vdy, keï pouívate¾ posúva beca na lište - pod¾a 
                momentálnej pozície beca budeme nastavova hrúbku pera 
                grafickej plochy </LI></UL></LI></DIV>
              <DIV align=left>
              <LI>onChange procedúra sa automaticky pripraví dvojklikom na 
              komponent vo formulári </LI></DIV></UL>
            <UL></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>spracovanie nastavovania hrúbky pera:</I></U> 
              </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.TrackBar1Change(Sender: TObject);
begin
  Image1.Canvas.Pen.Width:=<B>TrackBar1.Position</B>;
end;</PRE></TD></TR></TBODY></TABLE>
            <H3 align=left>Tlaèidlá nástrojov kreslenia</H3>
            <UL type=disc>
              <DIV align=left>
              <LI>kadı aj najjednoduchší kresliaci program umoòuje kresli 
              rôznymi nástrojmi - napr. nielen od ruky perom, ale aj úseèky, 
              obdåniky, elipsy ale aj vypåòa farbou nejaké oblasti 
              <LI>na to zadefinujeme 5 malıch tlaèidiel - komponentov 
              <B>SpeedButton</B> - tieto majú na rozdiel od klasického 
              <B>Button</B> viac vylepšení: 
              <UL type=disc>
                <LI>keï na ne klikneme, môu osta zatlaèené (vyjadruje zvolenı 
                nástroj) 
                <LI>okrem textu môu obsahova obrázok (môete poexperimentova 
                s <B>Glyph</B>) 
                <LI>môeme ich zoskupi do skupiny, v ktorej iba jedno tlaèidlo 
                bude zatlaèené (zatlaèenie iného spôsobí automatické vyskoèenie 
                predchádzajúceho) - do stavovej premennej (property) 
                <B>GroupIndex</B> všetkım nastavíme rovnaké èíslo, napr. 1 
              </LI></UL>
              <LI>na tlaèidlá napíšeme texty (je vhodné zvoli nejakı malı 
              font): pero, úseèka, obdånik, elipsa, vyplò 
              <LI>prvému tlaèidlu (s textom pero) nastavíme stavovú 
              premennú&nbsp;<B>Down</B> na true - tlaèidlo bude zatlaèené 
              <LI>zadefinujeme globálnu premennú <B>rezim</B>, ktorá bude 
              obsahova momentálne zvolenı nástroj - táto premenná sa bude 
              nastavova v udalosti onClick pre všetky SpeedButton1, 
              SpeedButton2, ... </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>napr.</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE><B>var
  rezim:(pero,usecka,obdlznik,elipsa,vypln) = pero;</B>

procedure TForm1.SpeedButton1Click(Sender: TObject);
begin
  rezim:=pero;
end;

procedure TForm1.SpeedButton2Click(Sender: TObject);
begin
  rezim:=usecka;
end;

procedure TForm1.SpeedButton3Click(Sender: TObject);
begin
  rezim:=obdlznik;
end;

...</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>asi&nbsp;by bolo krajšie, keby sme nemuseli vytvára pre kadé 
              tlaèidlo zvláš procedúru (v inej aplikácii by ich mohlo by ove¾a 
              viac) - ale napísali jednu univerzálnu - napr. SpeedButton1Click 
              by mohla by spoloèná pre všetky 
              <LI>potom, ako&nbsp;ju zadefinujeme, ju nastavíme všetkım ostatnım 
              tlaèidlám nástrojov: v záloke udalosti (Events) inšpektora 
              objektov pre <B>SpeedButton2</B> sa nastavíme na riadok s 
              udalosou <B>onClick</B> a z ponuky vyberieme 
              <B>SpeedButton1Click</B> - toto urobíme pre všetky tlaèidlá 
              nástrojov (ak sme stihli vytvori SpeedButton2Click, ... - zrušíme 
              ich tak, e vyprázdnime telo procedúr a po uloení - Save unitu sa 
              korektne zrušia celé procedúry) 
              <LI>SpeedButton1Click teraz na základe parametra Sender zistí, 
              ktorı komponent ju zavolal a na základe toho nastaví premennú 
              <B>rezim</B> </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>univerzálna SpeedButton1Click procedúra:</I></U> 
                </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.SpeedButton1Click(Sender: TObject);
begin
  if Sender = SpeedButton1 then
    rezim:=pero
  else if Sender = SpeedButton2 then
    rezim:=usecka
  else if Sender = SpeedButton3 then
    rezim:=obdlznik
  else if Sender = SpeedButton4 then
    rezim:=elipsa
  else if Sender = SpeedButton5 then
    rezim:=vypln;
end;</PRE></TD></TR></TBODY></TABLE>
            <UL>
              <DIV align=left>
              <LI>skôr ako sa pustíme do upravovania procedúr 
              <B>Image1MouseDown</B> a&nbsp;<B>Image1MouseMove</B>, aby zvládali 
              nové nástroje, musíme vysvetli ako budú pracova: 
              <UL>
                <LI type=disc>úseèka, obdånik a elipsa budú pracova na ve¾mi 
                podobnom&nbsp;princípe - pri štarte nástroja (teda zatlaèení 
                myšou) sa zapamätá momentálny stav grafickej plochy v pomocnej 
                bitmape <B>bmp</B> (globálna premenná typu <B>TBitmap</B>) a pre 
                kadom ahaní nástroja, napr. úseèky, sa najprv grafická plocha 
                vráti do tohoto pôvodného stavu a potom sa nakreslí nová úseèka 
                - musíme si pri tom pamäta poèiatoènı bod kreslenia, napr. v 
                globálnych premennıch <B>x0</B> a <B>y0</B> </LI></UL></LI></DIV>
              <DIV align=left>
              <LI>pomocná premenná <B>bmp</B> sa musí inicializova v 
              <B>FormCreate</B> 
              <LI>reim vypåòania oblasti je ešte jednoduchší - celı sa 
              zrealizuje pri zatlaèení tlaèidla myši, t.j. v Image1MouseDown 
              (mohol by by v Image1MouseDown - premyslite si, èo by sa tım 
              zmenilo) - na vypåòanie oblasti pouijeme metódu <B>FloodFill</B> 
              </LI></DIV></UL>
            <UL></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>spracovanie všetkıch reimov:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>var
  dole:boolean = false;
  rezim:(pero,usecka,obdlznik,elipsa,vypln) = pero;
  <B>bmp:TBitmap;</B>
  <B>x0,y0:integer;</B>

procedure TForm1.FormCreate(Sender: TObject);
begin
  DoubleBuffered:=true;
  Button1.Click;   <I><FONT color=navy>// zmae sa grafická plocha</FONT></I>
  Label1.Caption:='';
  with Image3, Canvas do begin
    Brush.Color:=Image1.Canvas.Pen.Color;
    FillRect(ClientRect);
  end;
  <B>bmp:=TBitmap.Create;</B>
end;

procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  dole:=ssLeft in Shift;
  if dole then
    with Image1.Canvas do
      case rezim of
        pero:
          MoveTo(X,Y);
        usecka,obdlznik,elipsa:
          begin
            b<B>mp.Assign(Image1.Picture);</B>
            x0:=X; y0:=Y;
          end;
        vypln:
          begin
            Brush.Color:=Pen.Color;
            <B>FloodFill(X,Y,Pixels[X,Y],fsSurface);</B>
          end;
      end;
end;

procedure TForm1.Image1MouseMove(Sender: TObject; Shift: TShiftState;
  X,Y: Integer);
begin
  Label1.Caption:=IntToStr(X)+' '+IntToStr(Y);
  if dole then
    with Image1.Canvas do
      case rezim of
        pero:
          LineTo(X,Y);
        usecka:
          begin
            <B>Draw(0,0,bmp);</B>
            MoveTo(x0,y0); LineTo(X,Y);
          end;
        obdlznik:
          begin
            <B>Draw(0,0,bmp);</B>
            Brush.Color:=Pen.Color;
            Brush.Style:=bsClear;
            Rectangle(x0,y0,X,Y);
          end;
        elipsa:
          begin
            <B>Draw(0,0,bmp);</B>
            Brush.Color:=Pen.Color;
            Brush.Style:=bsClear;
            Ellipse(x0,y0,X,Y);
          end;
      end;
end;</PRE></TD></TR></TBODY></TABLE>
            <H3 align=left>Zaškrtávacie políèko</H3>
            <UL type=disc>
              <DIV align=left>
              <LI>ešte urobíme posledné vylepšenie: umoníme pouívate¾ovi 
              programu aby si mohol zvoli, èi obdånik, resp. elipsa budú pri 
              vykreslení vyplnené farbou (zatia¾ sme ich vyrobili "deravé" - 
              nastavili sme <B>Brush.Style:=bsClear;</B>) 
              <LI>do formulára vloíme ešte jeden komponent - zaškrtávacie 
              políèko <B>CheckBox</B> - nastavíme mu popis (Caption) napr. na 
              <B>plnı</B> a opravíme v metóde <B>Image1MouseMove</B> kreslenie 
              obdånika a elipsy </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>pouitie CheckBoxu:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.Image1MouseMove(Sender: TObject; Shift: TShiftState;
  X,Y: Integer);
begin
 ...
        obdlznik:
          begin
            Draw(0,0,bmp);
            Brush.Color:=Pen.Color;
            <B>if CheckBox1.Checked then
              Brush.Style:=bsSolid
            else
              Brush.Style:=bsClear;</B>
            Rectangle(x0,y0,X,Y);
          end;
        elipsa:
          begin
            Draw(0,0,bmp);
            Brush.Color:=Pen.Color;
            <B>if CheckBox1.Checked then
              Brush.Style:=bsSolid
            else
              Brush.Style:=bsClear;</B>
            Ellipse(x0,y0,X,Y);
          end;
      end;
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>a projekt je hotovı - rozloenie komponentov môe by takéto: 
              </LI></DIV></UL>
            <P align=center><IMG height=318 
            src="12_ Myš a èasovaè_soubory/pz12_1.jpg" width=625 border=0></P>
            <H2>Zhrnutie</H2>
            <UL>
              <LI><B>stavové premenné</B> komponentov (vidíme ich v inšpektore 
              objektov) sú podobné polokám záznamu (record) 
              <LI>pri ich zmene v inšpektore objektov sa automaticky prejaví aj 
              ich vizuálna zmena vo formulári (napr. šírka, text, bublinkovı 
              help a pod.) 
              <LI>v Delphi sa takıto typ stavovıch premennıch nazıva Vlastnos, 
              t.j. <B>Property</B> 
              <LI>niektoré sú pre nás uitoèné u poèas tvorby formulára 
              (Caption, Name, Hint, Min, Max, ...), iné vyuijeme hlavne za behu 
              programu (niektoré fungujú len za behu, a preto v inšpektore 
              objektov nie sú) 
              <LI>meno komponentu (<B>Name</B>) treba zmeni hneï ako sa poloí 
              do formulára (ak ho chceme meni), inak niektoré situácie Delphi 
              nemusia správne uhádnu a opravi túto zmenu korektne 
              <LI>niektoré uitoèné vlastnosti (property) nám známych 
              komponentov: 
              <UL>
                <LI><U>formulár TForm</U> 
                <UL>
                  <LI>Caption - reazec - titulok okna 
                  <LI>ClientWidth, ClientHeight - ve¾kos vnútra okna (nie 
                  obvodu okna, pre ten je ve¾kos Width a Height) 
                  <LI>Left, Top - x-ová a y-ová súradnica okna na obrazovke - 
                  môeme celé okno posúva 
                  <LI>Visible - èi je okno vidite¾né 
                  <LI>WindowState - okno môeme zminimalizova, zmaximalizova 
                  <LI>Canvas (funguje len poèas behu programu) - šedá plocha - 
                  môeme do nej kresli (v udalosti <B>OnPaint</B>) </LI></UL>
                <LI><U>tlaèidlo TButton</U> 
                <UL>
                  <LI>Caption - text na tlaèidle 
                  <LI>Font - rovnako ako v grafickej ploche 
                  <LI>Height, Width - ve¾kos 
                  <LI>Left, Top - poloha vo formulári 
                  <LI>Visible - môeme ho skry 
                  <LI>Hint, ShowHint - string a boolean - bublinkovı help a èi 
                  sa má zobrazova 
                  <LI>Enabled - môeme ho zablokova, false znamená, e tlaèidlo 
                  bude zašedené </LI></UL></LI></UL>
              <LI>vlastnosti Width, Height, Left, Top, Visible, Hint, ShowHint, 
              Enabled - fungujú skoro rovnako pre skoro všetky typy komponentov 
              <UL>
                <LI><U>grafická plocha TImage</U> 
                <UL>
                  <LI>Canvas (funguje len poèas behu programu) - sprístupnenie 
                  kreslenia do grafickej plochy 
                  <LI>ClientRect (funguje len poèas behu programu) - hodnota 
                  typu TRect, t.j. obdånik, ktorı popisuje ve¾kos plochy 
                </LI></UL>
                <LI><U>malé tlaèidlo TSpeedButton</U> - ve¾mi podobné obyèajnému 
                tlaèidlu, ale tieto tlaèidlá môu tvori skupinu (vzájomne sa 
                vyluèujú - maximálne jedno z nich je zatlaèené), môe ma aj 
                obrázok 
                <UL>
                  <LI>Caption - text na tlaèidle (môe by spolu s obrázkom) 
                  <LI>GroupIndex - poradové èíslo skupiny tlaèidiel, ktoré sa 
                  navzájom vyluèujú 
                  <LI>Down - èi je zatlaèené 
                  <LI>Glyph - obrázok </LI></UL>
                <LI><U>posuvná lišta TTrackBar</U> 
                <UL>
                  <LI>Min, Max - minimálna a maximálna hodnota 
                  <LI>Position - momentálna hodnota 
                  <LI>Orientation - (trHorizontal,trVertical) </LI></UL>
                <LI><U>zaškrtávacie políèko TCheckBox</U> 
                <UL>
                  <LI>Caption - text za políèkom 
                  <LI>Font - písmo pre text 
                  <LI>Checked - èi je zaškrtnuté </LI></UL>
                <LI><U>text TLabel</U> 
                <UL>
                  <LI>Caption - ak reazec obsahuje #13#10, bude viacriadkovı 
                  <LI>Font - písmo pre text </LI></UL>
                <LI><U>textová plocha TMemo</U> 
                <UL>
                  <LI>Color - farba podkladu 
                  <LI>Font - písmo 
                  <LI>Lines - obsah textovej plochy - pole reazcov 
                  <LI>ReadOnly - èi má pouívate¾ zakázané meni obsah </LI></UL>
                <LI><U>editovací riadok TEdit</U> - je ve¾mi podobnı TMemo 
                <UL>
                  <LI>Color - farba podkladu 
                  <LI>Font - písmo 
                  <LI>Text - momentálny obsah riadka 
                  <LI>ReadOnly - èi má pouívate¾ zakázané meni obsah 
                  <LI>PasswordChar - ak obsahuje napr. <TT>'*'</TT>, tak sa 
                  namiesto zadávanıch znakov budú vypisova hviezdièky - pouíva 
                  sa pri zadávaní hesla </LI></UL></LI></UL></LI></UL>
            <UL>
              <LI>udalosti (<B>Events</B>) = záloka v inšpektore objektov = 
              môeme definova správanie pri špecifickıch situáciách 
              <LI>inšpektor nám pomôe správne zadeklarova takú procedúru, 
              ktorú vyvolá Windows, keï vznikne príslušná udalos (napr. klikne 
              sa, zmení sa, hıbe sa a pod.) 
              <LI>tieto procedúry definujeme tak, e v záloke Events (v riadku) 
              pri danej udalosti dvojklikneme v pravom ståpci (alebo si zvolíme 
              procedúru z u existujúcej ponuky procedúr) 
              <LI>nedopisujte manuálne iadne nové procedúry na spracovávanie 
              udalostí - vdy pouite inšpektor objektov 
              <LI>ak potrebujete nejakú procedúru obsluhujúcu udalos zruši, 
              najlepšie to urobíte tak, e vyèistíte obsah procedúry - necháte v 
              nej len poèiatoènı <B>begin</B> a koncovı <B>end</B> a pri 
              nasledujúcom uloení na disk (napr. Ctrl+S) ju Delphi automaticky 
              vyhodí </LI></UL>
            <H2 align=left>Myš a korytnaèky</H2>
            <UL type=disc>
              <DIV align=left>
              <LI>korytnaèka je grafické pero, ktoré dokáe nejaké veci navyše: 
              môe ma vizualizovanı tvar, jednoducho "vie natoèi súradnicovú 
              sústavu", v grafickej ploche ich môeme definova ¾ubovo¾nı poèet, 
              ... 
              <LI>prvı príklad ilustruje pouitie korytnaèky ako obyèajného 
              grafického pera </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>kreslenie korytnaèkou:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>var
  k:TKor;

procedure TForm1.FormCreate(Sender: TObject);
begin
  k:=TKor.Create; k.PH; k.Ukaz;    <I><FONT color=navy>// spomal:=1;</FONT></I>
end;

procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  k.PD;
end;

procedure TForm1.Image1MouseMove(Sender:TObject; Shift:TShiftState; X,Y:Integer);
begin
  <I><FONT color=navy>// k.ZmenSmer(k.Smerom(X,Y));</FONT></I>
  k.ZmenXY(X,Y);
  <B>Image1.Repaint;</B>
end;

procedure TForm1.Image1MouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  k.PH;
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>pri práci s myšou sa budeme vyhıba spoma¾ovaniu kreslenia 
              pomocou <B>spomal:=1;</B> - namiesto toho by sme mali pouíva 
              <B>Image1.Repaint;</B> 
              <LI>v tomto programe je korytnaèka "prilepená" ku myši - ak do 
              programu pridáme aj zakomentované <B>ZmenSmer</B>, korytnaèka sa 
              bude otáèa v smere pohybu myši 
              <LI>do Image1MouseMove môeme prida aj iné akcie, napr. 
              </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>pri pohybe korytnaèka kreslí hviezdièky:</I></U> 
                </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.Image1MouseMove(Sender:TObject; Shift:TShiftState; X,Y:Integer);
var
  i:integer;
begin
  k.ZmenSmer(k.Smerom(X,Y));
  k.ZmenXY(X,Y);
  for i:=1 to 5 do begin
    k.Dopredu(10); k.Vpravo(144);
  end;
  Image1.Repaint;
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>ïalší príklad ukáe generovanie korytnaèiek pri klikaní myšou: 
              kliknutie na vo¾né miesto vygeneruje novú korytnaèku, kliknutie na 
              u existujúcu korytnaèku ju mierne otoèí </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>klikanie na korytnaèky:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>var
  k:array[1..100] of TKor;
  n:integer = 0;     <I><FONT color=navy>// aktuálny poèet korytnaèiek</FONT></I>

procedure TForm1.FormCreate(Sender: TObject);
begin
  zmaz;   <I><FONT color=navy>// aby sa grafická plocha zobrazila u pri štarte</FONT></I>
end;

procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
var
  i:integer;
begin
  i:=1; while (i&lt;=n) and not <B>k[i].Blizko(X,Y)</B> do inc(i);
  if i&lt;=n then k[i].Vpravo(15)
  else begin
    inc(n); k[n]:=TKor.Create(X,Y); k[n].Ukaz;
  end;
  Image1.Repaint;
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>pouili sme korytnaèiu preddefinovanú funkciu (metódu) 
              <B>Blizko</B>, ktorá pre danı bod v rovine odpovie, èi je 
              korytnaèka od neho blízko </LI></DIV></UL>
            <H3 align=left>NDÚ</H3>
            <UL type=disc>
              <DIV align=left>
              <LI>nové korytnaèky by mohli vznika na kliknutie so zatlaèenım 
              pravım tlaèidlom myši, na ¾avé tlaèidlo môe korytnaèka urobi 
              nejakú akciu - nakresli nejakı obrázok, alebo sa prilepí na myš a 
              do nasledujúceho kliknutia putuje s myšou </LI></DIV></UL>
            <H2 align=left>Èasovaè</H2>
            <UL type=disc>
              <DIV align=left>
              <LI>predchádzajúcu úlohu, v ktorej sme klikaním vytvárali nové 
              korytnaèky, resp. ich otáèali trochu pozmeníme: kliknutie na 
              korytnaèku ju naštartuje kresli krunicu - a to pomaly - pouime 
              známu procedúru <B>cakaj</B> </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>kliknutie naštartuje krunicu:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
var
  i,j:integer;
begin
  i:=1; while (i&lt;=n) and not k[i].Blizko(X,Y) do inc(i);
  if i&gt;n then begin
    inc(n); k[n]:=TKor.Create(X,Y); k[n].Ukaz;
  end
  else
    with k[i] do
      for j:=1 to 36 do begin
        Dopredu(10); Vpravo(10);
        cakaj(50);       <I><FONT color=navy>// sleep(50); Image1.Repaint;</FONT></I>
      end;
  Image1.Repaint;
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>&nbsp;vzniká zaujímavı efekt: kliknutie na korytnaèku ju 
              rozbehne - poèas tohoto klikania môeme ïalej klika do plochy, na 
              iné korytnaèky ale aj na u rozbehnutú korytnaèku - asi ¾ahko 
              odhalíte, e kadé nové kliknutie na korytnaèku, zastaví 
              predchádzajúci pohyb a naštartuje novı pohyb - po skonèení tohoto 
              nového pohybu sa dokonèí aj ten pozastavenı... 
              <LI>ak namiesto <B>cakaj</B> pouijeme systémovı podprogram 
              <B>sleep</B> (zakomentovaná èas), tak sa tento efekt stratí: po 
              rozbehnutí korytnaèky program nereaguje, a kım korytnaèka 
              nedobehne celú krunicu 
              <UL>
                <LI>celé je to spôsobené tım, e v procedúre <B>cakaj</B> je 
                ukryté aj <B>Application.ProcessMessages</B> - to znamená, e 
                poèas èakania 50 milisekúnd dovolíme&nbsp;Windows reagova na 
                iné udalosti, napr. aj na kliknutie myšou a teda umoníme znovu 
                naštartova novú krunicu (po jej skonèení sa pokraèuje v 
                prerušenej akcii) 
                <LI>procedúra <B>sleep</B> nemá v sebe zabudované takéto 
                mechanizmy a preto je ve¾mi nebezpeèná </LI></UL></LI></DIV></UL>
            <UL type=disc>
              <LI>ukáeme inı spôsob, ako sa rieši problém so spoma¾ovaním 
              akcií: pouijeme novı komponent èasovaè -&nbsp;<B>Timer</B> (z 
              palety komponentov System) - poloíme ho niekam do plochy - je to 
              nevizuálny komponent a teda po spustení aplikácie nebude zobrazenı 

              <LI>èasovaè si môeme predstavi ako hodiny, ktoré s nejakou 
              frekvenciou "tikajú" -&nbsp;pri kadom tiknutí môu vykona nejakú 
              akciu 
              <LI>frekvenciu "tikania" nastavíme v stavovej premennej 
              <B>Interval</B>, pozastavenie / naštartovanie èasovaèa môeme 
              urobi logickou stavovou premennou <B>Enabled</B> - <I>true</I> 
              znamená, e hodiny beia, <I>false</I> znamená, e sme ich 
              pozastavili 
              <LI>èasovaè má jedinú udalos <B>onTimer</B>, ktorá sa naštartuje 
              po uplynutí "tikacieho" intervalu, t.j. zodpovedá jej procedúra 
              <B>Timer1Timer</B> 
              <LI>v nasledujúcom príklade predpokladáme èasovaè so sekundovım 
              tikaním, t.j. <B>Interval</B> je 1000; korytnaèke nastavíme tvar 
              úseèku dåky 100 
              <DIV></DIV></LI></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>sekundová ruèièka:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>var
  k:TKor;

procedure TForm1.FormCreate(Sender: TObject);
begin
  k:=TKor.Create; k.ZmenTvar([0,100]); k.Ukaz;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
  k.Vpravo(6);
  <B>Image1.Repaint;</B>
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>príklad s korytnaèkami, ktoré sa po kliknutí rozbehnú po 
              krunici preprogramujeme pomocou èasovaèa: pre kadú korytnaèku si 
              budeme pamäta v poli <B>kolko</B>, ko¾ko krokov po krunici ešte 
              musí prebehnú </LI></DIV></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>korytnaèky krúia po svojich kruniciach:</I></U> 
                </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>var
  k:array[1..100] of TKor;
  kolko:array[1..100] of integer;
  n:integer = 0;

procedure TForm1.FormCreate(Sender: TObject);
begin
  zmaz;
end;

procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
var
  i,j:integer;
begin
  i:=1; while (i&lt;=n) and not k[i].Blizko(X,Y) do inc(i);
  if i&gt;n then begin
    inc(n); k[n]:=TKor.Create(X,Y); k[n].Ukaz;
    kolko[n]:=0;
  end
  else if kolko[i]=0 then kolko[i]:=36;
  <I><FONT color=navy>// Image1.Repaint;</FONT></I>
end;

procedure TForm1.Timer1Timer(Sender: TObject);
var
  i:integer;
begin
  for i:=1 to n do
    if kolko[i]&gt;0 then
      with k[i] do begin
        dopredu(10); vpravo(10);
        dec(kolko[i]);
      end;
  <B>Image1.Repaint;</B>
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>èasovaèu <B>Timer1</B> sme nastavili <B>Interval</B> na 50 
              milisekúnd </LI></DIV></UL>
            <UL type=disc>
              <LI>na záver ukáeme príklad práce s èasovaèom a bitmapami: na 
              nejakom pozadí, napr. na fotografii <B>tiger.bmp</B> sa bude 
              pomaly pohybova nejakı obrázok, napr. <B>opica.bmp</B> - táto sa 
              bude odráa od boènıch stien grafickej plochy ako lopta od stien 
              miestnosti 
              <LI>okrem grafickej plochy (Image1) umiestnime èasovaè 
              <B>Timer1</B> s premennou&nbsp;<B>Intreval</B> nastavenou na 100 
              <DIV></DIV></LI></UL>
            <TABLE class=namo-table cellSpacing=1 borderColorDark=#9d7c31 
            cellPadding=3 width="90%" align=center bgColor=white 
            borderColorLight=#ffe7a6 border=0>
              <TBODY>
              <TR>
                <TD class=namo-th vAlign=" top" bgColor=#e2dab8>
                  <P><U><I>jednoduchá animácia:</I></U> </P></TD></TR>
              <TR>
                <TD vAlign=top><PRE>var
  pozadie,obr:TBitmap;
  x,y,dx,dy,x2,y2:integer;

procedure TForm1.FormCreate(Sender: TObject);
begin
  DoubleBuffered:=true;
  pozadie:=TBitmap.Create;
  pozadie.LoadFromFile('tiger.bmp');
  obr:=TBitmap.Create;
  obr.LoadFromFile('opica.bmp');
  obr.TransparentColor:=clWhite;
  obr.Transparent:=true;
  x:=100; y:=50; dx:=3; dy:=4;
  x2:=obr.Width div 2; y2:=obr.Height div 2;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
  Image1.Canvas.Draw(0,0,pozadie);
  <I><FONT color=navy>// Image1.Canvas.StretchDraw(Image1.ClientRect,pozadie);</FONT></I>
  inc(x,dx); if (x&lt;x2)or(x&gt;=Image1.Width-x2) then dx:=-dx;
  inc(y,dy); if (y&lt;y2)or(y&gt;=Image1.Height-y2) then dy:=-dy;
  Image1.Canvas.Draw(x-x2,y-y2,obr);
end;</PRE></TD></TR></TBODY></TABLE>
            <UL type=disc>
              <DIV align=left>
              <LI>namiesto <B>Draw</B> pri kreslení pozadia môeme poui aj iné 
              prostriedky, napr. vykachlièkovanie alebo <B>StretchDraw</B>, ale 
              tie môu vırazne spomali priebeh animácie </LI></DIV></UL>
            <H3 align=left>NDÚ</H3>
            <UL type=disc>
              <DIV align=left>
              <LI>umiestnite do plochy väèší poèet korytnaèiek - napr. 
              pravidelne ich rozmiestnite na priamke alebo krunici a nechajte 
              sa ich hıba pod¾a nejakıch pravidiel, napr. rôznou rıchlosou po 
              krunici, alebo kmita hore - dolu, tie s rôznou rıchlosou - 
              napr. prvá nech má rıchlos 1, druhá 1.1, tretia 1.2, ... 
              </LI></DIV></UL></TD></TR></TBODY></TABLE>
      <P align=center><IMG class=namo-hr height=3 
      src="12_ Myš a èasovaè_soubory/nth_a_hr.gif" width=450 border=0></P><!--NAMO_NAVBAR_START O P C  -->
      <DIV align=center><A href="http://www.delphi.input.sk/pz11.html"><IMG 
      src="12_ Myš a èasovaè_soubory/nth_a_back.gif" border=0></A><A 
      href="http://www.delphi.input.sk/index.html"><IMG 
      src="12_ Myš a èasovaè_soubory/nth_a_home.gif" border=0></A><A 
      href="http://www.delphi.input.sk/pz13.html"><IMG 
      src="12_ Myš a èasovaè_soubory/nth_a_next.gif" border=0></A></DIV><!--NAMO_NAVBAR_END-->
      <HR width=550 SIZE=1>

      <P align=center><FONT size=1>© 2001 AB, KVI<BR><A 
      href="mailto:blaho@fmph.uniba.sk">blaho@fmph.uniba.sk</A></FONT></P></TD></TR></TBODY></TABLE>
<P>&nbsp;</P></BODY></HTML>
