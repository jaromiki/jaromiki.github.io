From: <Uloženo v aplikaci Windows Internet Explorer 7>
Subject: =?windows-1250?Q?PC_Sv=ECt:_Za=E8=EDn=E1me_s_objektov=FDm_programov?=
	=?windows-1250?Q?=E1n=EDm_=284.=29?=
Date: Thu, 12 Jul 2007 10:19:35 +0200
MIME-Version: 1.0
Content-Type: text/html;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable
Content-Location: http://www.pcsvet.cz/art/article_print.php?id=668
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--nic--><HTML><HEAD><TITLE>PC Sv=ECt: Za=E8=EDn=E1me s objektov=FDm =
programov=E1n=EDm (4.)</TITLE>
<META lang=3Dcz content=3Dpcsvet name=3Ddescription>
<META lang=3Den content=3Dpcsvet name=3Ddescription>
<META lang=3Dcz content=3Dpcsvet name=3Dkeywords>
<META lang=3Den content=3Dpcsvet name=3Dkeywords>
<META http-equiv=3Ddescription content=3Dpcsvet>
<META http-equiv=3Dcontent-language content=3Dcz>
<META http-equiv=3Dcontent-type content=3D"text/html; =
charset=3Dwindows-1250">
<STYLE type=3Dtext/css>.sc {
	FONT-SIZE: 9pt; FONT-FAMILY: Courier New
}
.kod {
	FONT-SIZE: 9pt; FONT-FAMILY: Courier New
}
</STYLE>

<META content=3D"MSHTML 6.00.6000.16481" name=3DGENERATOR></HEAD>
<BODY>
<H2 align=3Dcenter>PC Sv=ECt - <A=20
href=3D"http://www.pcsvet.cz/">http://www.pcsvet.cz/</A></H2>
<HR SIZE=3D1>

<H2>Za=E8=EDn=E1me s objektov=FDm programov=E1n=EDm (4.)</H2>
<H4>Jak jsme si =F8ekli v minul=E9m d=EDle, dnes bude =F8e=E8 o =
Konstruktoru. Tato=20
kapitola je pro OOP velice d=F9le=9Eit=E1, a proto si ji =
p=F8ibl=ED=9E=EDme trochu=20
podrobn=ECji...</H4>
<HR color=3D#777777 SIZE=3D1>

<P><B>Konstruktor</B></P>
<P>Datov=FD typ se stane doopravdy objektov=FDm a=9E od chv=EDle, kdy =
mezi jeho metodami=20
bude tzv. <B>konstruktor</B> (speci=E1ln=ED metoda, kter=E1 slou=9E=ED v =
vytv=E1=F8en=ED objekt=F9=20
dan=E9 t=F8=EDdy). Konstruktory maj=ED za =FAkol vyhradit pro =
vytv=E1=F8enou instanci m=EDsto v=20
pam=ECti a uv=E9st ji do takov=E9ho stavu, aby ji pak bylo mo=9Eno =
plnohodnotn=EC=20
pou=9E=EDvat. </P>
<P>Doposud n=E1m sta=E8ilo k zprovozn=ECn=ED&nbsp; dan=E9 instance =
(bu=EF n=E1mi definovan=FDch=20
typ=F9 nebo neobjektov=FDch skal=E1rn=EDch typ=F9) vyhradit pot=F8ebnou =
pam=EC=9D a pop=F8=EDpad=EC=20
p=F8i=F8adit po=E8=E1te=E8n=ED hodnotu.</P>
<P>Konstruktory instanc=ED objektov=FDch datov=FDch typ=F9 slou=9E=ED k =
tomu, aby bylo mo=9Eno=20
definovat instance datov=FDch typ=F9 ve v=9A=ED pot=F8ebn=E9 =
komplexnosti. Zabezpe=E8uj=ED, =9Ee=20
p=F8i definici dan=E9ho objektu nejen vyhrad=ED pot=F8ebn=FD =
pam=EC=9Dov=FD prostor, ale =9Ee se=20
nav=EDc provedou i nutn=E9 inicializa=E8n=ED akce. Vyhrazen=ED =
pot=F8ebn=E9ho m=EDsta se bere na=20
starost p=F8eklada=E8, na program=E1tora zb=FDv=E1 pouze po=9Eadovan=E1 =
inicializace.</P>
<P>Konstruktor=F9 m=F9=9Ee b=FDt ve t=F8=EDd=EC n=ECkolik a mohou se =
li=9Ait po=E8tem a typem=20
parametr=F9 nebo pouze po=9Eadovanou =E8innost=ED. Mezi nimi maj=ED dva =
konstruktory=20
v=FDjime=E8n=E9 postaven=ED. Je to bezparametrick=FD konstruktor a =
kop=EDrovac=ED=20
konstruktor.</P>
<P>Bezparametrick=FD konstruktor :<BR>&nbsp; Je to konstruktor bez =
parametr=F9. ;-)=20
Implicitn=ED verze bezparametrick=E9ho konstruktoru, kterou je za =
jist=FDch podm=EDnek=20
p=F8eklada=E8 ochoten vytvo=F8it automaticky, pouze vyhrad=ED m=EDsto =
pro definovanou=20
instanci, pop=F8=EDpad=EC provede je=9At=EC n=ECkter=E9 dal=9A=ED akce, =
aby se vytvo=F8ila=20
plnohodnotn=E1 instance.</P>
<P>Kop=EDrovac=ED konstruktor:<BR>&nbsp;&nbsp;&nbsp; Je to konstruktor, =
jeho=9E=20
jedin=FDm parametrem je odkaz na prom=ECnnou t=E9ho=9E typu, kter=E9ho =
je on=20
konstruktorem. Tak=E9 kop=EDrovac=ED konstruktor um=ED v p=F8=EDpad=EC =
pot=F8eby vytvo=F8it=20
p=F8eklada=E8. Tato implicitn=ED verze kop=EDrovac=EDho konstruktoru, =
vytvo=F8en=E1=20
p=F8eklada=E8em, vyhrad=ED pot=F8ebnou pam=EC=9D pro nov=FD objekt a =
zkop=EDruje slo=9Eku po=20
slo=9Ece obsah sv=E9ho parametru do konstruovan=E9ho objektu.</P>
<P>V C++ se konstruktory definuj=ED jako metody, jejich=9E =
identifik=E1tor je shodn=FD s=20
identifik=E1torem t=F8=EDdy, jej=ED=9E instance konstruuj=ED. Pozor! =
<B>V DEKLARACI=20
KONSTRUKTORU NESM=CDME UV=C1D=CCT TYP VRACEN=C9 HODNOTY (ani void) =
</B>!!! Pokud tedy=20
chceme definovat n=ECkolik r=F9zn=FDch konstruktor=F9, mus=ED se li=9Ait =
po=E8tem nebo typem=20
pou=9Eit=FDch parametr=F9. Na jednu v=ECc bychom v=9Aak m=ECli v=9Edy =
pamatovat: <I>jakmile=20
t=F8=EDda obsahuje n=ECjak=FD explicitn=ED (n=E1mi definovan=FD) =
konstruktor, negeneruje=20
p=F8eklada=E8 implicitn=ED bezparametrick=FD konstruktor</I>. </P>
<P>Dokud tedy nen=ED ve t=F8=EDd=EC definov=E1n =9E=E1dn=FD explicitn=ED =
konstruktor, m=F9=9Ee=20
p=F8eklada=E8 pokl=E1dat danou t=F8=EDdu za klasick=FD strukturov=FD =
datov=FD typ roz=9A=ED=F8en=FD o=20
metody. Objekty takov=FDchto typ=F9 konstruovat um=ED a podobn=EC =
zkonstruuje i instanci=20
objektov=E9ho typu.</P>
<P>Jakmile v=9Aak definujete jak=FDkoliv vlastn=ED konstruktor, =
p=F8eklada=E8, kter=FD neum=ED=20
zjistit, jak=E9 dodate=E8n=E9 akce tento konstruktor prov=E1d=ED, si =
p=F8estane b=FDt jist, =9Ee=20
by jeho verze bezparametrick=E9ho konstruktoru ud=EClala v=9Ae, co je =
pro vytvo=F8en=ED=20
dan=E9ho objektu pot=F8eba. Proto rad=ECji ponech=E1 definici =
bezparametrick=E9ho=20
konstruktoru na program=E1torovi.</P>
<P>V opa=E8n=E9m p=F8=EDpad=EC by se toti=9E mohlo st=E1t, =9Ee by =
program=E1tor na definici=20
bezparametrick=E9ho konstruktoru zapomn=ECl, p=F8eklada=E8 by v =
pot=F8ebn=E9m okam=9Eiku=20
nasadil sv=F9j implicitn=ED bezparametrick=FD konstruktor a chov=E1n=ED =
vytvo=F8en=FDch=20
prom=ECnn=FDch by nemuselo b=FDt ekvivalentn=ED </P>
<P>S kop=EDrovac=EDm konstruktorem je to jinak. Ten si p=F8eklada=E8 =
ochoten vygenerovat=20
v=9Edy, tehdy i tehdy, kdy=9E jsme si ji=9E n=ECjak=E9 konstruktory =
definovali. Kop=EDrovac=ED=20
konstruktor tedy explicitn=EC definujeme pouze v p=F8=EDpad=EC, kde =
chceme, aby ud=EClal=20
n=ECco jin=E9ho ne=9E jeho implicitn=ED verze.</P>
<P><FONT=20
style=3D"FONT-SIZE: 9pt; FONT-FAMILY: Courier =
New"><B>P=F8=EDklad:</B><BR>Legenda<BR>&nbsp;&nbsp;&nbsp;=20
BK - bezparametrick=FD konstruktor<BR>&nbsp;&nbsp;&nbsp; IBK - =
implicitn=ED=20
bezparametrov=FD konstruktor<BR>&nbsp;&nbsp;&nbsp; KK - kop=EDrovac=ED=20
konstruktor<BR>&nbsp;&nbsp;&nbsp; IKK - implicitn=ED kop=EDrovac=ED=20
konstruktor<BR>&nbsp;&nbsp;&nbsp; k-r - konstruktor (t=ECsnopiseck=E1=20
zkratka)</FONT></P>
<P><FONT style=3D"FONT-SIZE: 9pt; FONT-FAMILY: Courier New">strct=20
A&nbsp;&nbsp;&nbsp;&nbsp; //T=F8=EDda bez explicitn=EDch k-r=F9. Akce=20
nutn=E9<BR>{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
//pro=20
vytvo=F8en=ED jejich instanc=ED se neli=9A=ED<BR>int =
a1;&nbsp;&nbsp;&nbsp;&nbsp; //od akc=ED=20
p=F8i definici struktur a obn=E1=9Aej=ED akce<BR>int =
a2;&nbsp;&nbsp;&nbsp;&nbsp;=20
//realizovan=E9 IBK<BR>void Metoda() {};<BR>}<BR>unsigned =
nB=3D0;&nbsp;&nbsp;=20
//Po=E8et vytvo=F8en=FDch instanc=ED t=F8=EDdy B<BR><BR>struct =
B&nbsp;&nbsp;&nbsp;&nbsp;=20
//T=F8=EDda s explecitn=FD definovan=FDmi =
k-ry<BR>{<BR>&nbsp;&nbsp;&nbsp; int=20
bi;<BR>&nbsp;&nbsp;&nbsp; A bA;<BR>&nbsp;&nbsp;&nbsp; B( A&amp; a, int =
i=3D0 )=20
//K-r s jedn=EDm param. typu A&amp; a druh=FDm<BR>&nbsp;&nbsp;&nbsp;=20
{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
//celo=E8=EDseln=FDm s=20
implicitn=ED po=E8=E1te=E8n=ED =
hodnotou.<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bA=20
=3D a; //K-r je definov=E1n p=F8=EDmo, tj. jako vlo=9Een=E1=20
fce.<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bi =3D i; //M=F9=9Ee =
slou=9Eit jako=20
p=F8etypovac=ED k-r<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nB ++; =

<BR>&nbsp;&nbsp;&nbsp; };<BR>// Je-li definov=E1n jak=FDkoliv =
konstruktor, p=F8eklada=E8=20
BK<BR>// negeneruje a v p=F8=EDpad=EC pot=F8eby jej mus=ED =
definovat<BR>// program=E1tor s=E1m=20
- nap=F8. takto: B() {};<BR>// tj. jako vlo=9Eenou funkci s pr=E1zdn=FDm =
t=EClem.<BR>// V=20
na=9Aem p=F8=EDpad=EC bude funkci BK plnit =
konstruktor<BR>&nbsp;&nbsp;&nbsp; B ( int=3D0,=20
int=3D0, int=3D0 );<BR>// B( int&amp; i); //CHYBA: Takto definovan=FD =
konstruktor by=20
nebylo<BR>//mo=9Eno odli=9Ait od p=F8edchoz=EDho.<BR>&nbsp;&nbsp;&nbsp; =
B ( B&amp; b=20
);//KK mus=EDm definovat, proto=9Ee IKK nevyhovuje<BR>};<BR><BR>inline =
B::B ( int=20
i1, int i2, int i3 )<BR>//Konstruktor definujeme jako vlo=9Een=FD, =
proto=9Ee p=F8i jeho=20
<BR>//jednoduchosti by p=F8ed=E1v=E1n=ED parametr=F9 pouze=20
zdr=9Eovalo<BR>{<BR>&nbsp;&nbsp;&nbsp; bi =3D i1;<BR>&nbsp;&nbsp;&nbsp; =
bA.a1 =3D=20
i2;<BR>&nbsp;&nbsp;&nbsp; bA.a2 =3D i3;<BR>&nbsp;&nbsp;&nbsp; nB++; =
//Zvy=9Auje se=20
po=E8et vytvo=F8en=FDch instanc=ED<BR>}<BR><BR>B::B( B&amp; b )<BR>{=20
<BR>&nbsp;&nbsp;&nbsp; bi =3D b.bi;<BR>&nbsp;&nbsp;&nbsp; bA.a1 =3D=20
b.bA.a1;<BR>&nbsp;&nbsp;&nbsp; bA.a2 =3D b.bA.a2;<BR>&nbsp;&nbsp;&nbsp;=20
nB++;<BR>}</FONT></P>
<P>Uff... Dnes to bylo tro=9Aku del=9A=ED, ale ned=E1 se nic d=EClat. =
Tohle se d=E1=20
pova=9Eovat za z=E1klad OOP. D=EDky za p=F8e=E8ten=ED a p=F8=ED=9At=EC =
v=E1m p=F8ibl=ED=9E=EDm=20
Destruktor...</P>
<HR SIZE=3D1>
Autor: <B>Michal Gabriel</B>, <A=20
href=3D"mailto:micgab@pcsvet.cz">micgab@pcsvet.cz</A><BR>Rubrika: <B><A=20
href=3D"http://www.pcsvet.cz/c/">Programov=E1n=ED - C, C++</A></B><BR>
<HR SIZE=3D1>

<P align=3Dcenter>--- Vyti=9At=ECno 12.7.2007 10:19:16 ze serveru PC =
Sv=ECt ---</P><!--nic--></BODY></HTML>
