<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<META http-equiv=Content-Language content=sk>
<META http-equiv=Content-Type content="text/html; charset=windows-1250">
<html>
<head>
	<title>OpenGL-úvod</title>
</head>

<body>
<dl><dt>Základní informace o OpenGL
	<dd>Knihovna OpenGL(Open Graphics Library) bola navrena firmou SGI (Silicon Graphics Inc.) 
	jako aplikaèní programové rozhraní (Application Programming Interface - API) k akcelerovanım grafickım kartám 
	resp. celım grafickım subsystémùm. Pøedchùdcem této knihovny byla programová knihovna 
	IRIS GL (Silicon Graphics IRIS Graphics Library). 
	OpenGL byla navrena s dùrazem na to, aby byla pouitelná na rùznıch typech grafickıch akcelerátorù 
	a aby ji bylo mono pouít i v pøípadì, e na urèité platformì ádnı grafickı akcelerátor 
	není nainstalován - v tom pøípadì se pouije softwarová simulace. 
	V souèasné dobì lze knihovnu OpenGL pouít na rùznıch verzích unixovıch systémù (vèetnì Linuxu a samozøejmì IRIXu), 
	OS/2 a na platformách Microsoft Windows.
	Logo OpenGL a název OpenGLTM je registrovaná známka firmy Silicon Graphics Inc.
	Na nìkterıch platformách je moné rozdìlení aplikace na dvì relativnì samostatné èásti - serverovou a klientskou. 
	Pøi vykreslování se potom jednotlivé pøíkazy (co jsou vìtšinou parametry funkcí OpenGL) pøenášejí pøes síové rozhraní. 
	Knihovna OpenGL (narozdíl od IRIS GL nebo Direct 3D) byla vytvoøena tak, aby byla nezávislá na pouitém operaèním systému, 
	grafickıch ovladaèích a správcích oken (Window Managers). Proto také neobsahuje ádné funkce pro práci s okny 
	(otevírání, zrušení, zmìnu velikosti), pro vytváøení grafického uivatelského rozhraní 
	(Graphical User Interface - GUI) ani pro zpracování událostí. 
	Tyto funkce lze zajistit buï pøímo voláním funkcí pøíslušného správce oken, nebo lze pouít nìkterou z nadstaveb, 
	napøíklad ji døíve na ROOTovi popsanou knihovnu GLUT [4] [5] (OpenGL Utility Toolkit). 
	Pro dosaení co nejvìtší nezávislosti na pouité platformì zavádí knihovna OpenGL vlastní primitivní datové typy, 
	napøíklad GLbyte, GLint nebo GLdouble. Tyto typy a jejich pouití budou podrobnìji popsány v dalších dílech seriálu.
	Programátorské rozhraní knihovny OpenGL je vytvoøeno tak, aby knihovna byla pouitelná v témìø libovolném programovacím jazyce. 
	Primárnì je k dispozici hlavièkovı soubor pro jazyky C a C++. V tomto souboru jsou deklarovány 
	nové datové typy pouívané knihovnou, nìkteré symbolické konstanty (napø. GL_POINTS) 
	a sada cca 120 funkcí tvoøících vlastní rozhraní. Existují však i podobné soubory s deklaracemi pro další programovací jazyky, 
	napøíklad Fortran, Object Pascal èi Javu; tyto soubory jsou vìtšinou automaticky vytváøeny z Cèkovskıch hlavièkovıch souborù.
	Z programátorského hlediska se OpenGL chová jako stavovı automat. 
	To znamená, e bìhem zadávání pøíkazù pro vykreslování lze prùbìnì mìnit vlastnosti vykreslovanıch primitiv 
	(barva, prùhlednost) nebo celé scény (volba zpùsobu vykreslování, transformace) a toto nastavení zùstane zachováno do té doby, 
	ne ho explicitnì zmìníme. Vıhoda tohoto pøístupu spoèívá pøedevším v tom, 
	e funkce pro vykreslování mají menší poèet parametrù a e jedním pøíkazem lze globálnì zmìnit zpùsob vykreslení celé scény, 
	napøíklad volbu drátového zobrazení modelu (wireframe model) nebo zobrazení pomocí vyplnìnıch polygonù (filled model). 
	Vykreslování scény se provádí procedurálnì - voláním funkcí OpenGL se vykreslí vıslednı rastrovı obrázek. 
	Vısledkem volání tìchto funkcí je rastrovı obrázek uloenı v tzv. framebufferu, kde je kadému pixelu pøiøazena barva, hloubka, 
	alfa sloka popø. i další atributy. Z framebufferu lze získat pouze barevnou informaci 
	a tu je moné následnì zobrazit na obrazovce - viz následující obrázek.
	OpenGL nezaruèuje, e pøi spuštìní identického programu pouívajícího knihovnu OpenGL na rùznıch platformách 
	nebo rùznıch grafickıch akcelerátorech dostaneme vdy pøesnì stejnı vısledek. 
	Pokud bychom oba vısledné rastrové obrázky porovnali pixel po pixelu, mohli bychom zjistit mírné rozdíly v barvách. 
	Mùe to bıt zpùsobeno napøíklad odlišnou pøesností reprezentace èísel na grafické kartì, odlišnımi algoritmy 
	pro interpolaci barvy, normály a texturovıch souøadnic nebo jinou bitovou hloubkou Z-bufferu. 
	Celkové geometrické a barevné podání scény by však mìlo bıt zachováno.
	Pomocí funkcí poskytovanıch knihovnou OpenGL lze vykreslovat obrazce a tìlesa sloená ze základních geometrickıch prvkù, 
	které nazıváme grafická primitiva. Mezi tato primitiva patøí bod, úseèka, trojúhelník, ètyøúhelník, 
	plošnı konvexní polygon, bitmapa (jednobarevnı rastrovı obraz) a pixmapa (barevnı rastrovı obraz). 
	Existují i funkce, které podporují proudové vykreslování nìkterıch primitiv - lze napøíklad vykreslit polyèáru (line loop), 
	pruh trojúhelníkù (triangle strip), pruh ètyøúhelníkù (quad strip) nebo trs trojúhelníkù (triangle fan). 
	Na vrcholy tvoøící jednotlivá grafická primitiva lze aplikovat rùzné transformace (otoèení, zmìna mìøítka, posun, 
	perspektivní projekce), pomocí kterıch lze pomìrnì jednoduše vytvoøit animace. 
	Vykreslovaná primitiva mohou bıt osvìtlena nebo pokryta texturou. Dále je moné celou vykreslovanou scénu "skrıt" v mlze.
	Z hlediska datové reprezentace vykreslované scény poskytují funkce OpenGL, podobnì jako Direct 3D Immediate Mode, 
	pouze základní rozhraní pro pøístup ke grafickım akcelerátorùm. Existují však rozšiøující knihovny, 
	které funkcionalitu dále zvyšují. Jednou ze základních knihoven pouívanıch spoleènì s OpenGL je knihovna GLU 
	(OpenGL Utilities), která umoòuje vyuívat tesselátory (rozloení nekonvexních polygonù na trojúhelníky), 
	evaluátory (vıpoèet souøadnic bodù leících na parametrickıch plochách) a vykreslovat kvadriky (koule, válce, kuely a disky). 
	Další nadstavbovou knihovnou je Open Inventor, pomocí kterého lze konstruovat celé scény 
	sloené z hierarchicky navázanıch objektù. V porovnání s Direct 3D Retained Mode, kde se také pracuje s hierarchií scény, 
	je však Open Inventor knihovna mnohem mocnìjší a pøitom má pomìrnì jednoduché rozhraní.
	V dalším dílu tohoto seriálu si popíšeme syntaxi funkcí deklarovanıch v OpenGL a uvedeme si pøíklad na vykreslení 
	jednoduchého obrazce.
</DL>
<H2>Úvod</H2>
<P>Nauèíme sa pouíva kninicu OpenGL. Kninice OpenGL slúia na prácu s 2D aj 
3D grafikou. V kninici sú implementované algoritmy pre transformáciu a 
zobrazovanie geometrickıch útvarov. Je vıhodné pouíva grafickú kartu s 
akcelerovanou 3D grafikou, pretoe kninice prenesú znaènú èas vıpoètov na 
hardvér grafickej karty, èím sa vırazne urıchlia vıpoèty a vykres¾ovanie. Pri 
programovaní (aspoò v našom prípade) sa však nemusíme trápi s tım, akú grafickú 
kartu máme v poèítaèi nainštalovanú. Rozdiely v hardvéry zakrıvajú kninice a 
operaènı systém.</P>
<P>Podrobné informácie:</P>
<UL>
  <LI>opengl.hlp 
  <LI><A href="http://www.opengl.org/">http://www.opengl.org/</A> 
  <LI><A 
  href="http://www.root.cz/serialy/graficka-knihovna-opengl/">http://www.root.cz/serialy/graficka-knihovna-opengl/</A> 
  </LI></UL>
<H2>Inicializovanie</H2>
<P>Pre inicializovanie pouijeme nasledujúcu šablónu:</P>
<TABLE bgcolor="#ffff99" border="1" bordercolor="Blue" >
  <TBODY>
  <TR>
    <TD width="100%"><SPAN class=reserverword>uses</SPAN><SPAN class=program> 
      </SPAN>...,<SPAN class=program> <FONT color=#0044ff><BR>&nbsp; 
      OpenGL</FONT>;<BR><BR></SPAN><SPAN class=reserverword>var</SPAN><SPAN 
      class=program><BR>&nbsp; RC: HGLRC=0;<BR>&nbsp; DC: 
      HDC=0;<BR><BR></SPAN><SPAN class=reserverword>procedure</SPAN><SPAN 
      class=program> TForm1.FormCreate(Sender: TObject);<BR></SPAN><SPAN 
      class=reserverword>var</SPAN><SPAN class=program><BR>&nbsp; PFD: 
      TPixelFormatDescriptor;<BR>&nbsp; PF: Integer;<BR></SPAN><SPAN 
      class=reserverword>begin</SPAN><SPAN class=program><BR>&nbsp; // 
      </SPAN>Nastavenie Device Contextu:<SPAN class=program><BR>&nbsp; 
      DC:=GetDC(Handle);<BR>&nbsp; FillChar(PFD, SizeOf(TPixelFormatDescriptor), 
      0);<BR>&nbsp; PFD.nSize:=SizeOf(TPixelFormatDescriptor);<BR>&nbsp; 
      PFD.nVersion:=1;<BR>&nbsp; PFD.dwFlags:=PFD_DRAW_TO_WINDOW </SPAN><SPAN 
      class=reserverword>or</SPAN><SPAN class=program> PFD_SUPPORT_OPENGL 
      </SPAN><SPAN class=reserverword>or</SPAN><SPAN class=program> 
      PFD_DOUBLEBUFFER;<BR>&nbsp; PFD.iPixelType:=PFD_TYPE_RGBA;<BR>&nbsp; 
      PFD.cColorBits:=24;<BR>&nbsp; PFD.cDepthBits:=32;<BR>&nbsp; 
      PFD.iLayerType:=PFD_MAIN_PLANE;<BR>&nbsp; PF:=ChoosePixelFormat(DC, 
      @PFD);<BR>&nbsp; </SPAN><SPAN class=reserverword>if</SPAN><SPAN 
      class=program> PF=0 </SPAN><SPAN class=reserverword>then</SPAN><SPAN 
      class=program> Exit;<BR>&nbsp; SetPixelFormat(DC, PF, @PFD);<BR>&nbsp; // 
      </SPAN>Vytvorenie Rendering Contextu:<SPAN class=program><BR>&nbsp; 
      RC:=wglCreateContext(DC);<BR>&nbsp; wglMakeCurrent(DC, RC);<BR>&nbsp; 
      glClearColor(0, 0, 0, 0);<BR>&nbsp; glClearDepth(1);<BR>&nbsp; 
      glEnable(GL_DEPTH_TEST);<BR>&nbsp; // </SPAN>Nastavenie zobrazovania:<SPAN 
      class=program><BR>&nbsp; glViewport(0, 0, ClientWidth, 
      ClientHeight);<BR>&nbsp; glMatrixMode(GL_PROJECTION);<BR>&nbsp; 
      glLoadIdentity;<BR>&nbsp; gluPerspective(60, ClientWidth/ClientHeight, 1, 
      1000);<BR>&nbsp; glMatrixMode(GL_MODELVIEW);<BR>&nbsp; 
      glLoadIdentity;<BR></SPAN><SPAN class=reserverword>end</SPAN><SPAN 
      class=program>;<BR><BR></SPAN><SPAN 
      class=reserverword>procedure</SPAN><SPAN class=program> 
      TForm1.FormDestroy(Sender: TObject);<BR></SPAN><SPAN 
      class=reserverword>begin</SPAN><SPAN class=program><BR>&nbsp; 
      wglMakeCurrent(0, 0);<BR>&nbsp; wglDeleteContext(RC);<BR>&nbsp; 
      RC:=0;<BR>&nbsp; ReleaseDC(Handle, DC);<BR>&nbsp; DC:=0;<BR></SPAN><SPAN 
      class=reserverword>end;</SPAN></TD></TR></TBODY></TABLE>
<P><U>NDÚ:</U> Vytvorte kninicu, v ktorej skryjete predchádzajúcu inicializáciu 
a finalizáciu.</P>
<P>Vidíme, e kninica OpenGL je neobjektová. Funkcie kninice OpenGL zaèínajú 
prefixom<FONT color=#0044ff><SPAN class=program> gl</SPAN></FONT>... a pomocné 
funkcie prefixom<FONT color=#0044ff><SPAN class=program> glu</SPAN></FONT>... Do 
takéhoto programu budeme postupne dopåòa kód.</P>




</body>
</html>
