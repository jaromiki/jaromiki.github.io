<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<META http-equiv=Content-Language content=sk>
<META http-equiv=Content-Type content="text/html; charset=windows-1250">

<html>
<head>
	<title>Transformácie</title>
</head>

<body>
<h2>Spôsob zobrazovania</h2>
<dl><dt>glViewport(0, 0, ClientWidth, ClientHeight);
	<dd>Tento príkaz nastavuje súradnice vıstupu v okne kam smeruje vıstup z OPENGL. V našom príklade je vıstup od súradnice [0,0] 
		(èo je ¾avı hornı roh nášho okna) a ve¾kos vıstupu je daná tak aby pokryla celé naše okno - Form1. Vıstup mono samozrejme
		posiela aj do menšej èasti okna.
	<dt>Spôsob zobrazovania 3D scény
	<dd>
	<table bgcolor="#ffff99" cellpadding="10" border="1">
					<tr><th>Perspektíva<th>Ortogonálne
					<tr><td>glMatrixMode(GL_PROJECTION);  
	                   <br>glLoadIdentity; 
					   <br>gluPerspective(60, ClientWidth/ClientHeight, 1, 1000);	
				   <td>glMatrixMode(GL_PROJECTION);  
	                   <br>glLoadIdentity; 
					   <br>  glOrtho(-5, 5, -5, 5, -5, 5);
		</table>			 
		<br>  
		<h3>Perspektíva</h3>		
		<table frame="vsides"><tr><td nowrap>gluPerspective(
					<td>60, <td>poèiatoènı uhol otoèenia okolo osi y
				<tr><td> <td>ClientWidth/ClientHeight, <td>pomer šírka oproti vıške
				<tr><td> <td>1, <td>súradnice z &lt;= 1 sa nezobrazia - pre èiary/plochy cez ktoré táto rovina prechádza budú orezané
								  <br>(ak chceme vidie aj tieto súradnice musíme pred zobrazením zavola transformáciu posun,
								  ktorá posunie všetko o dz)
				<tr><td> <td>1000, <td>z=1000 rovnica roviny za ktoru u bude všetko odrezané (nezobrazené)
		</table>		
<br>Pri perspektíve ak posúvame objekt od nás ïalej (z sa zmenšuje), tak sa objekt zmenšuje a naopak.
<br>Tie si treba uvedomi rozdiel medzi zväèšením a priblíením.
<br>
		<h3>Orto</h3>
		parametre: xmin,xmax,ymin,ymax,ymin,ymax urèujú priestor, ktorı bude vykreslovanı (všetko mimo bude odrezané) a tento prestor je 
		"natiahnutı" na obrazovku. Tento zobrazovací priestor je pevnı - transformácie súradníc sa ho netıkajú. 
</dl>
<h2>Transformácie súradníc</h2>
<br>Transformaèní matice v OpenGL
<br>V OpenGL existují tøi transformaèní matice, které se postupnì aplikují na body (vrcholy, vertexy) popø. i na normály vrcholù. 
První transformaèní matice se jmenuje ModelView matrix. Na tuto matici se mùeme dívat jako na spojení modelové matice a pohledové matice, 
protoe se pouívá jak pro nastavení pozice kamery, tak i pro manipulaci s objekty (modely) ve scénì. Druhá transformaèní matice se jmenuje 
Projection matrix a pouívá se pro nastavení perspektivní projekce kamery. Tøetí transformaèní matice se jmenuje Viewport matrix a pouívá se 
po provedení perspektivní projekce k mapování objektù z abtraktních souøadnic do souøadnic okna. 
Tato poslední matice ve skuteènosti pouze provádí transformaci v dvojrozmìrné ploše, proto se s ní v OpenGL nepracuje jako s "plnohodnotnou" maticí. 
Kromì tìchto tøí matic mùeme mìnit matici, která se pouívá pøi mapování textur na povrch objektù. Tato matice se nazıvá Texture matrix.
Zmìna transformaèních matic a nastavení aktuální transformaèní matice
Pøi zmìnì nìkteré z transformaèních matic musíme nejprve urèit, kterou transformaèní matici budeme mìnit. 
K tomuto úèelu se pouívá funkce void glMatrixMode(GLenum mode). Tato funkce má jeden parametr mode, jím urèujeme matici, 
kterou budeme dalšími pøíkazy zmìnit. Parametr mùe nabıvat tøí hodnot, reprezentovanıch symbolickımi konstantami:
GL_MODELVIEW - bude se mìnit ModelView matrix, tj. matice, ve které jsou uloeny modelové a pohledové transformace (transformace objektù a nastavení kamery). 
GL_PROJECTION - bude se mìnit Projection matrix, tj. matice, která se pouívá pro nastavení perspektivní nebo ortogonální projekce kamery. 
GL_TEXTURE - bude se mìnit Texture matrix, tj. matice, která se pouívá pøi mapování textur na povrch objektù. 
Aktuálnì nastavenou matici lze zjistit pomocí pøíkazu glGetIntegerv(GL_MATRIX_MODE, &currentMode), po jeho provedení je v promìnné currentMode 
nìkterá z konstant GL_MODELVIEW, GL_PROJECTION nebo GL_TEXTURE.
<br>Zmìna obsahu aktuálnì nastavené transformaèní matice
S obsahem aktuálnì nastavené matice lze manipulovat pomocí funkcí glLoadIdentity(), glLoadMatrix*(), glMultMatrix*(), glTranslate*(), glScale*() a glRotate*().
Nejjednodušší z tìchto funkcí je funkce void glLoadIdentity(void). Tato funkce nahraje do aktuálnì nastavené transformaèní matice koeficienty odpovídající 
jednotkové matici, tj. matici, ve které jsou všechny prvky vynulovány s vıjimkou prvkù hlavní diagonály, které jsou nastaveny na jednièku. 
Tato matice hraje úlohu neutrálního prvku pøi násobení matic nebo pøi násobení vektoru maticí. 
Pøi nastavování nìkteré transformaèní matice se v naprosté vìtšinì pøípadù zaèíná touto funkcí, nebo pomocí ní matici "pøipravíme" na aplikaci dalších transformací.
Funkce glLoadMatrix*() se pouívá pro pøímé nastavení prvkù matice. Tato funkce existuje ve dvou variantách lišících se pouze typem pole, 
které funkci pøedáváme jako parametr. První varianta je nadeklarována jako void glLoadMatrixd(const GLdouble *m), druhá varianta jako 
void glLoadMatrixf(const GLfloat *m). U první varianty má pole jako své prvky hodnoty typu GLdouble, ve druhé variantì jsou to prvky typu GLfloat.
Další funkce glMultMatrix*() slouí k vynásobení aktuálnì nastavené transformaèní matice maticí zadanou jako parametr této funkce. 
Opìt existují dvì varianty, které se liší typem prvkù pøedávaného pole. Tyto varianty jsou nadeklarovány jako void glMultMatrixd(const GLdouble *m) 
a void glMultMatrixf(const GLfloat *m). U první varianty se pouívají hodnoty typu GLdouble, u druhé typu GLfloat.
Další tøi funkce, glTranslate*(), glScale*() a glRotate*() jsou pouívány mnohem èastìji ne pøedchozí dvì funkce. 
U tìchto funkcí se nemanipuluje pøímo s jednotlivımi prvky matice, ale zadávají se základní lineární transformace - posun, zmìna mìøítka a rotace. 
Pro zadané transformace se vytvoøí doèasná matice a aktuální matice (vìtšinou je to matice ModelView) je touto doèasnou maticí vynásobena.
Funkce glTranslate*(), která existuje ve dvou variantách void glTranslated(GLdouble x, GLdouble y, GLdouble z) a void glTranslatef(GLfloat x, GLfloat y, GLfloat z), 
specifikuje posun o vektor [x, y, z].
Funkce glScale*() s variantami void glScaled(GLdouble x, GLdouble y, GLdouble z) a void glScalef(GLfloat x, GLfloat y, GLfloat z) slouí k zadání 
transformace zmìny mìøítka, kdy je tìleso nezávisle zvìtšeno/zmenšeno ve tøech smìrech odpovídajících jednotlivım souøadnım osám.
Funkce glRotate*(), která má opìt dvì varianty void glRotated(GLdouble angle, GLdouble x, GLdouble y, GLdouble z) 
a void glRotatef(GLfloat angle, GLfloat x, GLfloat y, GLfloat z), specifikuje transformaci rotace. 
Tìleso je otoèeno o úhel angle okolo osy procházející poèátkem a bodem (x, y, z). Úhel angle je v obou variantách zadán ve stupních. 
Bod, jím osa rotace prochází, by nemìl bıt nastaven na souøadnice (0, 0, 0).
Získání hodnot prvkù jednotlivıch transformaèních matic
Pro získání hodnot, které mají jednotlivé prvky transformaèních matic, lze pouít funkci void glGetDoublev(GLenum pname, GLdouble * params) 
nebo void glGetFloatv(GLenum pname, GLfloat * params). Parametr pname musí obsahovat jednu z tìchto symbolickıch konstant: 
GL_MODELVIEW_MATRIX, GL_PROJECTION_MATRIX nebo GL_TEXTURE_MATRIX. V poli params jsou potom vráceny prvky pøíslušné transformaèní matice.
</body>
</html>
