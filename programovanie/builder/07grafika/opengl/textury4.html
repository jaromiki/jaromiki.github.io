  <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1250">
    <meta name="Content-language" content="sk"> 
    <LINK href="../../css/style.css" type="text/css" rel=stylesheet>
</head>

<body>
<h3>Textury - viac obrázkov</h3>
<dl>
<dt>Viaceré textúry
<dd>Jedna z moností ako vloi do programu viaceré obrázkové textúry je vytvori si jeden obrázok o rozmere 256x256
    v ktorom budú 4 obrázky o rozmere 128x128. Naèítame tak jedinú textúru a tom ktorı obrázok sa má ukáza sa rozhodne parametrami
	príkazu glTexCoord2f().
	
<br>V prvej úlohe urobíme kocku, kde na všetkıch stenách bude rovnakı obrázok
<ul><li>zoeniem si pod¾a monosti 4 štvorcové obrázky a vloíme ich do jedného images4.bmp.
	<li>upravím ho na ve¾kos 256x256
	<li>vytvorím si globálnu premennú bmp
		<br><b>char bmp[256][256][3];</b> 		
		<br>sem potrebujem da pre kadı pixel 4-obrázka mnostvo farieb R,G,B.
	<li>Otvorím súbor s obrázkom (vytvorím premennú typu FILE a otvorím ho na èítanie)
		<br><b>FILE *f  =fopen("images2.bmp","r");</b>	
	<li>naplním pole <b>bmp</b>
		<br><b>fread(bmp,54,1,f);</b> // naèítam celú hlavièku obrázka a zahodím ju, kurzor sa presunie na zaèiatok dát
    	<br><b>fread(bmp,256*256*3,1,f);</b> //a obrázok je naèítanı, pod win je ale problém, e farby sú zapísané v tvare bgr a nie rgb
	 <li>Teraz zapneme texturu a nastavíme parametre textury
	 	<br><b>glEnable(GL_TEXTURE_2D);</b>
 		<br><b>glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_linear);</b>
 		<br><b>glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_linear);</b>
	<li>Urèíme, ktorá textúra sa bude zobrazova
		<br><b>glTexImage2D(GL_TEXTURE_2D,</b> 
		    <br><b>0,</b>&nbsp; &nbsp; &nbsp;//to je èíslo textúry (ak je jedna dáme 0) 
			<br><b>3,</b>&nbsp; &nbsp; &nbsp;//poèet farieb (ak nedávame priesvitnos dáme vdy 3)
			<br><b>256,</b>&nbsp; &nbsp; &nbsp;//rozmer textury -šírka
			<br><b>256,</b>&nbsp; &nbsp; &nbsp;//rozmer textury -vıška 
			<br><b>0,</b> 
			<br><b>GL_BGR_EXT,</b> // musíme prehodi poradie farieb, štandartne sa dáva GL_RGB
			<br><b>GL_UNSIGNED_BYTE,</b> 
			<br><b>@bmp);</b>&nbsp; &nbsp; &nbsp;//adresa dát kde je textúra naèítaná
	<li>a môeme da vykresli 
<pre>	
void TForm1::ogl_draw()
{ glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();
  glRotatef(uholx,1.0f,0.0f,0.0f);
  glRotatef(uholy,0.0f,1.0f,0.0f);

//tu zadávame príkazy na kreslenie
  glColor4f(1.0f, 1.0f, 1.0f,1.0f);
    glBegin(GL_QUADS);
        glTexCoord2f(0.0, 0.0); glVertex3f(-4,-4,-4);
        glTexCoord2f(0.0, 0.5); glVertex3f(-4,+4, -4);
        glTexCoord2f(0.5, 0.5); glVertex3f(+4, +4,-4);
        glTexCoord2f(0.5, 0.0); glVertex3f(+4, -4,-4);

        glTexCoord2f(0.0, 0.5); glVertex3f(-4,-4,+4);
        glTexCoord2f(0.5, 0.5); glVertex3f(-4,+4, +4);
        glTexCoord2f(0.5, 1.0); glVertex3f(+4, +4,+4);
        glTexCoord2f(0.0, 1.0); glVertex3f(+4, -4,+4);

        glTexCoord2f(0.5, 0.0); glVertex3f(-4,-4,-4);
        glTexCoord2f(0.5, 0.5); glVertex3f(-4,+4, -4);
        glTexCoord2f(1.0, 0.5); glVertex3f(-4, +4,+4);
        glTexCoord2f(1.0, 0.0); glVertex3f(-4, -4,+4);

         glTexCoord2f(0.5, 0.5); glVertex3f(+4,-4,-4);
        glTexCoord2f(1.0, 0.5); glVertex3f(+4,+4, -4);
        glTexCoord2f(1.0, 1.0); glVertex3f(+4, +4,+4);
        glTexCoord2f(0.5, 1.0); glVertex3f(+4, -4,+4);
   glEnd();

glFlush();
SwapBuffers(hdc);

}
</pre>
</ul>	

<br>Pouitá textúra:
<br><img src="obr/textury/obr256.bmp" width="128" height="128" border="0" alt="">
Ak vyuijeme tento postup, môme v programe poui 4 obrázkové textúry 128x128, poèet manuálnych prechodovıch textúr nie je obmedzenı.
<br>V ïalšej èasti si ukáeme ako vytvori v jednom programe viac obrázkovıch textúr (napr. na kadú stenu kocky inú).
</body>
</html>
