<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	 <title>Èasovaè a dialógy</title>
	 <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1250">
 	 <meta name="Content-language" content="sk">	
	  <LINK href="../css/style.css" type="text/css" rel=stylesheet>
</head>

<body>
<h3>Èasovaè</h3>
<dl>
	<dt class=main>Èasovaè
	<dd>Animáciu v delphi budeme rieši pomocou objektu pre prácu s èasovaèom.
		Mono ste u robili pokusy aby sa napr. text posúval po formulári pomocou cyklu,
		no nepodarilo sa vám to. Problém je v tom, e delphi najprv vo svojej pamäti mení obrazovku a a 
		po skonèení práce celého podprogramu špeciálnym procesom zobrazí vıslednú obrazovku, take 
		zmeny obrazovky poèas práce podprogramu nevidíme. Vidíme len poslednı stav obrazovky. Na animáciu teda
		musíme ís inak. (Ono sa to dá aj cyklom, pozri rekurziu, kde je popísané ako to "špeciálne" prerušenie urobi)
		Na animáciu teda pouijeme Timer. Ide o nevizuálny objekt (je teda jedno kam na plochu ho vloíme). Jeho úlohou je 
		v predpísanıch intervaloch preruši prácu nášho spusteného programu a vykona v tomto prerušení nami predpísané
		 príkazy. Vıslednı efekt je potom akoby paralelne beal program aj príkazy prerušenia. V príkazoch timra mono meni
		 vlastnosti našich objektov (teda aj polohu) a tie aj premennıch programu.
		<br>Má nasledovné vlastnosti:
		<ul><li>Enabled - èi má by aktívny (èi beia hodiny, ktoré robia prerušenia)
			<li>Interval - v akıch èasovıch intervaloch sa má spúša, údaj je v tisícinach sekundy
		</ul>
		Vlastnos <b>Enabled</b> mono zapnú/vypnú aj za behu programu - tımto mono napr. zastavi/spusti animáciu. 

		<br><br>Ukáeme si to na príklade, kde rozpohybujeme edit, ktorı sa bude pohybova v horizontálnom smere a bude sa odráa od mantinelov.
		<br>Vytvorme nasledovnı formulár:
<div style="border-width:3;border-style:outset;width:450px;margin:10px;background-color:silver;">
   <div align="left" style="background-color:#3366ff; width:450px; padding:0;border-width:0;color:white">Form1
   </div>
   <div style="background-color:silver; width:450px;" id="back1" align="center">
   <br><input type="Text" value="x" size="2">
   <br><br>
   <input type="Button" value="Štart" onclick=""> &nbsp; &nbsp; 
   <input type="Button" value="Stop">
</div>
<img src="../obr/timer.png" width="37" height="35" border="0" alt="">
</div>		
			<br> Stlaèením tlaèídka Štart sa Edit1 sa spustí Timer1 ktorı v pravidelnıch intervaloch posunie Edit1 o dx. 
			Pri "narazení" na mantinel sa odrazí.
			<br>Po stlaèení Stop sa Timer vypne a Edit zastane.
			<br>Tu je vıpis
<div style="border-width:3;border-style:outset;width:450px;margin:10px;background-color:silver;">
   <div align="left" style="background-color:#3366ff; width:450px; padding:0;border-width:0;color:white">Unit1.pas
   </div>
   <div style="background-color:silver; width:450px;" id="back1" >
<pre>
unit Unit1;
interface
uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, StdCtrls;
type
  TForm1 = class(TForm)
    Edit1: TEdit;
    Button1: TButton;
    Button2: TButton;
    Timer1: TTimer;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;
var
  Form1: TForm1;
  dx:integer;
implementation
{$R *.dfm}
procedure TForm1.Button1Click(Sender: TObject);
begin
<font color="Blue">Timer1.Enabled:=True; //zapne casovac</font>
end;
procedure TForm1.Button2Click(Sender: TObject);
begin
<font color="Blue">  Timer1.Enabled:=False; //zapne casovac</font>
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
<font color="Blue">   
Edit1.Left:=Edit1.Left+dx; //posunieme Edit
   if Edit1.Left>=Form1.Width-Edit1.Width then dx:=-dx; //ak pravy mantinel zmena
   if Edit1.Left<=2 then dx:=-dx;                       //ak lavy mantinel zmena
</font>
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
<font color="Blue">dx:=2; //poèiatoèná velkost posunutia Editu</font>
end;

end.
</pre>
</div></div>	
		
<br><br>
Vo vlastnostiach Timeru zvolíme interval (asi chceme aby pohyb bol rıchly tak volíme malé èíslo 20-50)
a zvolíme vo vlastnosti Enabled False aby po spustení stál Edit na mieste.
<br>Pozn. Ak je poèítaè pomalší, alebo akcia, ktorú èasovaè vykonáva moc nároèná
	nemusí by dodranı èasovı interval, poèítaè bude robi tak rıchlo ako sa dá 
	(niekedy vznikne aj paradox, e ak to s hustotou volania preenieme môe to ís pomalšie).
<br>Otázka ako sa bude program chova, keï mu poèas behu zmeníme ve¾kos okna?
<dl><dt class=second>Príklady na precvièenie:
			<dd><table cellspacing="20"><tr><td>
				<img src="../obr/ktstrofa.wmf" border="0" alt="" height="50">		
   				<td><ul><li>vytvor Edit, ktorı sa bude pohybova šikmo a odráa sa od štyroch mantinelov.
				<li>Vytvor program na simuláciu hry "Videostop"
				<br> &nbsp; &nbsp;Na obrazovke budú 3 èíslice 0..9, ktoré sa náhodne menia. Úlohou 
				hráèa je zastavova ich tlaèítkom. 
				<br> &nbsp; &nbsp;Hráè má na zaèiatku 100Sk 
				<br> &nbsp; &nbsp;Pri dvoch rovnakıch mu pribudne 10Sk, pri troch 50Sk, pri rôznych ubudne 20Sk
				<br> &nbsp; &nbsp;Hra sa zrıch¾uje
				<br> &nbsp; &nbsp;Hra konèí pri konte &lt;=0
				<br> &nbsp; &nbsp;Hra si pamätá dosiahnutı rekord		
				<br>2. Napis program na trening hry pexeso. 
				<br> &nbsp; &nbsp;Hracia plocha - 6x6, 18-písmen z velkej abecedy
				<br> &nbsp; &nbsp;Na zaciatku zamiesa a na 2 sek. ukáza
				<li>Naprogramuj <a href="lodz.exe">lod</a> s vlnami
				</ul>
				</table>		
		</dl>
</body>
</html>
