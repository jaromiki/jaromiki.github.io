<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Textové súbory</title>
</head>

<body>
Textový súbor sa skladá z riadkov. Každý riadok môže mať "ľubovoľnú" veľkosť a je ukončený
CR/LF pod OS DOS a LF pod OS UNIX. Pri zápise systém sám vloží koniec riadku a pri čítaní
koniec riadku odstráni.
<dl><dt><font size="+1" color="Blue">Deklarácia</font>
	<dd><dl><dt><font color="Red">FILE </font>*f,*g
			<dd>f,g sú názvy-adresy buffra cez ktorý sa spojenie so súborom urobí
			<br>slovo FILE musí byť celé veľkými písmenami
		</dl>
	<dt><font size="+1" color="Blue">Otvorenie</font>
	<dd><dl><dt>f<font color="Red">=fopen(</font>cesta, použitie<font color="Red">)</font>
			<dd>vytvorí logické spojenie medzi buffrom f a fyzickým súborom
			<br>ak sú v ceste opačné lomítka musia byť zdvojené
			<br>použitie:
			<br> &nbsp; "r" - otvorenie len na čítanie
			<br> &nbsp; "w" - otvorenie len na zápis
			<br> &nbsp; "a" - otvorenie na zápis-pridávanie
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí otvoriť vráti hodnotu NULL (preddefinovaná konštanta) - môžeme testovať
		</dl>
	<dt><font size="+1" color="Blue">Uzavretie súboru</font>
	<dd><dl><dt><font color="Red">fclose(</font>identifikátor<font color="Red">)</font>
			<dd>Vyprázdni buffer spojený s daným súborom a súbor korektne uzavrie.  
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí uzavrieť vráti hodnotu EOF (preddefinovaná konštanta) - môžeme testovať
		</dl>
	<dt><font size="+1" color="Blue">Zápis do súboru </font>
	<dd><dl><dt><font color="Red">fprintf(</font>subor, format, argumenty<font color="Red">)</font>
			<dd>funguje ako printf, len zápis je do súboru
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí zapísať vráti hodnotu EOF (preddefinovaná konštanta) - môžeme testovať
			<dt><font color="Red">fputc(</font>znak, subor<font color="Red">)</font>
			<dt><font color="Red">putc(</font>znak, subor<font color="Red">)</font>
			<dd>Položí znak do súboru
			<br>!Pozor na poradie parametrov!
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí zapísať vráti hodnotu EOF (preddefinovaná konštanta) - môžeme testovať
			<dt><font color="Red">fputs(</font>reťazec, subor<font color="Red">)</font>
			<dd>Položí reťazec do súboru a pridá '\n' - ukončenie vety
			<br>!Pozor na poradie parametrov!
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí zapísať vráti hodnotu EOF (preddefinovaná konštanta) - môžeme testovať
			<dt><font size="+1" color="Blue">Úlohy</font>
			<dd><ol><li>Napíšte program na načítanie textu z klávesnice a jeho zápis do súboru. Názov súboru načítajte.
						Pri otváraní i zápise robte kontrolu vykonania - v prípade chyby vypíšte oznam a ukončite program.
					<li>Napíš program na generovanie príkladov typu cislo1 operacia cislo2 =
						<br>počet príkladov je 10, operácie +,-,*,/
						<br>cislo1, cislo2 sú náhodné dvojciferné čísla volené tak, aby výsledky boli tiež maximálne dvojciferné a celé.
				</ol>
		</dl>
	
	<dt><font size="+1" color="Blue">Čítanie zo súboru </font>
	<dd><dl><dt><font color="Red">fscanf(</font>subor, format, argumenty<font color="Red">)</font>
			<dd>funguje ako scanf, len číta zo súboru
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí načítať vráti hodnotu EOF (preddefinovaná konštanta) - môžeme testovať
			<dt><font color="Red">fgetc(</font>subor<font color="Red">)</font>
			<dd>funguje ako getc, umožní aj vrátiť posledne prečítaný znak ungetc
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí načítať vráti hodnotu EOF (preddefinovaná konštanta) - môžeme testovať
			<dt><font color="Red">fgets(...)</font>
			<dd>načíta reťazec, preberie sa pri preberaní reťazcových premenných
			<dt><font color="Red">ungetc(znak, subor)</font>
			<dd>vráti posledne načítaný znak aby ho bolo možné načítať - rovnako ako ungetch
			<dt><font size="+1" color="Blue">Úlohy</font>
			<dd><ol>
				<li>Napíš program na načítanie názvu súboru a jeho výpis na obrazovku, v prípade chyby vypíš oznam.
				<li>Napíš program, ktorý načítava súbor vytvorený úlohou2 v predošlých úlohách, vypisuje po riadkoch
					a vyžiada si za rovná sa natipovanú správnu odpoveď. Nakoniec vypíš štatistiku odpovedí.
				</ol>
		</dl>	
	<dt><font size="+1" color="Blue">Ošetrovanie chýb</font>
	<dd>Každá funkcia má návratovú hodnotu a podľa nej sa dá testovať úspešnosť operácie. Ďalšie možnosti:
		<ul>
		<li><font color="Red">feof(</font> subor<font color="Red"> )</font> ... pri čítaní zo súboru je možné testovať "logickú" funkciu feof() 
		<li><font color="Red">ferror(</font> subor<font color="Red"> )</font> ... vráti číslo chyby (0=OK)
		<li><font color="Red">perror(</font> retazec<font color="Red"> )</font> ... vypíše reťazec a text chyby 
		<li><font color="Red">clearerr(</font> subor<font color="Red"> )</font> ... vymaže chybový stav na danom súbore 
		</ul>
	<dl><dt><font size="+1" color="Blue">Úlohy k ošetrovaniu chýb</font>
	<dd><ol><li>Načítaj názov súboru a vypíš ho na obrazovku. V prípade chyby pri otváraní vypíš "Chyba pri otváraní súboru:" 
				a potom vypíš štandartné chybové hlásenie patriace vzniklej chybe. 
		</ol>
	</dl>
	<dt><font size="+1" color="Blue">Typické úlohy</font>
	<dd><ol>
	<li>Poznáme počet viet - vytvorme súbor plat1996.dat, kde v 12-tich riadkoch bude každý riadok začína platom za jednotlivý mesiac
		<br>- napíšte program, ktorý vypíše priebeh zárobku za mesiace
		<br>- vypíše názov mesiaca s najväčším prímom
	<li>Počet viet je uvedený v prvej vete
		<br>upravme súbor plat1996.dat tak, že v prvej vete bude uvedené počet spracovaných mesiacov
		<br>- vypočítaj priemerný plat za uvedené mesiace
	<li>Nevieme počet viet
		<br>upravme súbor z úlohy2 tak, že vynecháme prvú vetu
		<br>- vypíš počet sledovaných mesiacov
		<br>- vypíš priemerný plat za uvedené mesiace
	<li>Nevieme počet viet a ani počet čísel v riadku
		<br>vytvorme súbor vreckove.dat, kde v každom riadku budú všetky príjmy za odpovedajúci mesiac
		<br>- napíš počet sledovaných mesiacov
		<br>- napíš číslo mesiaca, kde bol najväčší počet príjmov
		<br>- napíš číslo mesiaca, kde bol najmenší príjem
	<li>Napíš program na okopírovanie súboru. Program si vypýta oba názvy súborov. 	
</ol>
</dl>


</body>
</html>
