<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	 <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1250">
	 <meta name="Content-language" content="sk">	
	  <LINK href="css/style.css" type="text/css" rel=stylesheet>
	<title>Textové súbory</title>
</head>

<body>
Textovı súbor sa skladá z riadkov. Kadı riadok môe ma "¾ubovo¾nú" ve¾kos a je ukonèenı
CR/LF pod OS DOS a LF pod OS UNIX. Pri zápise systém sám vloí koniec riadku a pri èítaní
koniec riadku odstráni.
<dl><dt><font size="+1" color="Blue">Deklarácia</font>
	<dd><dl><dt><font color="Red">FILE </font>*f,*g
			<dd>f,g sú názvy-adresy buffra cez ktorı sa spojenie so súborom urobí
			<br>slovo FILE musí by celé ve¾kımi písmenami
		</dl>
	<dt><font size="+1" color="Blue">Otvorenie</font>
	<dd><dl><dt>f<font color="Red">=fopen(</font>cesta, pouitie<font color="Red">)</font>
			<dd>vytvorí logické spojenie medzi buffrom f a fyzickım súborom
			<br>ak sú v ceste opaèné lomítka musia by zdvojené
			<br>pouitie:
			<br> &nbsp; "r" - otvorenie len na èítanie
			<br> &nbsp; "w" - otvorenie len na zápis
			<br> &nbsp; "a" - otvorenie na zápis-pridávanie
			<br>Ošetrenie chyby:
			<br>Subor na zapis (ak je pripadná cesta k nemu spravna) sa da pod Win otvori prakticky vdy
			<br>Ak otvárame súbor na èítanie alebo pridávanie tak tento musí existova (ak neexistuje funkcia vráti NULL)
			<br>Podobne ako v pascale môme otvorení na èítanie testova, èi súbor existuje alebo nie. 
		</dl>
	<dt><font size="+1" color="Blue">Uzavretie súboru</font>
	<dd><dl><dt><font color="Red">fclose(</font>identifikátor<font color="Red">)</font>
			<dd>Vyprázdni buffer spojenı s danım súborom a súbor korektne uzavrie.  
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí uzavrie vráti hodnotu EOF (preddefinovaná konštanta) - môeme testova
		</dl>
	<dt><font size="+1" color="Blue">Zápis do súboru </font>
	<dd><dl><dt><font color="Red">fprintf(</font>subor, format, argumenty<font color="Red">)</font>
			<dd>funguje ako printf, len zápis je do súboru
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí zapísa vráti hodnotu EOF (preddefinovaná konštanta) - môeme testova
			<dt><font color="Red">fputc(</font>znak, subor<font color="Red">)</font>
			<dt><font color="Red">putc(</font>znak, subor<font color="Red">)</font>
			<dd>Poloí znak do súboru
			<br>!Pozor na poradie parametrov!
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí zapísa vráti hodnotu EOF (preddefinovaná konštanta) - môeme testova
			<dt><font color="Red">fputs(</font>reazec, subor<font color="Red">)</font>
			<dd>Poloí reazec do súboru a pridá '\n' - ukonèenie vety
			<br>!Pozor na poradie parametrov!
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí zapísa vráti hodnotu EOF (preddefinovaná konštanta) - môeme testova
			<dt><font size="+1" color="Blue">Úlohy</font>
			<dd><ol><li>Napíšte program na naèítanie textu z klávesnice a jeho zápis do súboru. Názov súboru naèítajte.
						Pri otváraní i zápise robte kontrolu vykonania - v prípade chyby vypíšte oznam a ukonèite program.
					<li>Napíš program na generovanie príkladov typu cislo1 operacia cislo2 =
						<br>poèet príkladov je 10, operácie +,-,*,/
						<br>cislo1, cislo2 sú náhodné dvojciferné èísla volené tak, aby vısledky boli tie maximálne dvojciferné a celé.
				</ol>
		</dl>
	
	<dt><font size="+1" color="Blue">Èítanie zo súboru </font>
	<dd><dl><dt><font color="Red">fscanf(</font>subor, format, argumenty<font color="Red">)</font>
			<dd>funguje ako scanf, len èíta zo súboru
			<br>Návratová hodnota:
			<br><b>EOF</b> - Ak sa pokúsime èíta za koncom súboru vráti hodnotu EOF (preddefinovaná konštanta)
			          <br> &nbsp; &nbsp; ak však naèíta aspoò jeden znak nevráti EOF ale poèet uspokojenıch premennıch
			<br><b>0</b> - ak sa iadna premenná nenaplnila
			<br><b>n</b> - ak sa naplnilo n premennıch zo zoznamu premennıch
			<br>Pozn. - Ak sa niektorı údaj zo vstupu nepodarí zapísa-skonvertova do premennej 
			    naèítanie konèí bez chyby a funkcia vráti poèet úspešne zmenenıch premennıch.
			<dt><font color="Red">fgetc(</font>subor<font color="Red">)</font>
			<dd>funkcia funguje ako getch z klávesnice, umoní aj vráti posledne preèítanı znak ungetc
				<br>( úplne rovnako mono poui aj makro getc(subor))
			<br>Ošetrenie chyby:
			<br>Ak sa nepodarí naèíta (èítame za koncom súboru) vráti hodnotu EOF (preddefinovaná konštanta) - môeme testova
			<dt><font color="Red">fgets(...)</font>
			<dd>naèíta reazec, preberie sa pri preberaní reazcovıch premennıch
			<dt><font color="Red">ungetc(znak, subor)</font>
			<dd>vráti zadanı znak (obyèajne posledne naèítanı), aby ho bolo moné opätovne naèíta 
			    (funguje podobne ako ungetch() pri naèítaní z klávesnice)
			<dt><font size="+1" color="Blue">Úlohy</font>
			<dd><ol>
				<li>Napíš program na naèítanie názvu súboru a jeho vıpis na obrazovku, v prípade chyby vypíš oznam.
				<li>Napíš program, ktorı naèítava súbor vytvorenı úlohou2 v predošlıch úlohách, vypisuje po riadkoch
					a vyiada si za rovná sa natipovanú správnu odpoveï. Nakoniec vypíš štatistiku odpovedí.
				</ol>
		</dl>	
	<dt><font size="+1" color="Blue">Ošetrovanie chıb</font>
	<dd>Kadá funkcia má návratovú hodnotu a pod¾a nej sa dá testova úspešnos operácie. Ïalšie monosti:
		<ul>
		<li><font color="Red">feof(</font> subor<font color="Red"> )</font> ... pri èítaní zo súboru je moné testova "logickú" funkciu feof() 
		<li><font color="Red">ferror(</font> subor<font color="Red"> )</font> ... vráti èíslo chyby (0=OK)
		<li><font color="Red">perror(</font> retazec<font color="Red"> )</font> ... vypíše reazec a text chyby 
		<li><font color="Red">clearerr(</font> subor<font color="Red"> )</font> ... vymae chybovı stav na danom súbore 
		</ul>
	<dl><dt><font size="+1" color="Blue">Úlohy k ošetrovaniu chıb</font>
	<dd><ol><li>Naèítaj názov súboru a vypíš ho na obrazovku. V prípade chyby pri otváraní vypíš "Chyba pri otváraní súboru:" 
				a potom vypíš štandartné chybové hlásenie patriace vzniklej chybe. 
		</ol>
	</dl>
	<dt><font size="+1" color="Blue">Typické úlohy</font>
	<dd><ol>
	<li>Poznáme poèet viet - vytvorme súbor plat1996.dat, kde v 12-tich riadkoch bude kadı riadok zaèína platom za jednotlivı mesiac
		<br>- napíšte program, ktorı vypíše priebeh zárobku za mesiace
		<br>- vypíše názov mesiaca s najväèším prímom
	<li>Poèet viet je uvedenı v prvej vete
		<br>upravme súbor plat1996.dat tak, e v prvej vete bude uvedené poèet spracovanıch mesiacov
		<br>- vypoèítaj priemernı plat za uvedené mesiace
	<li>Nevieme poèet viet
		<br>upravme súbor z úlohy2 tak, e vynecháme prvú vetu
		<br>- vypíš poèet sledovanıch mesiacov
		<br>- vypíš priemernı plat za uvedené mesiace
	<li>Nevieme poèet viet a ani poèet èísel v riadku
 		<br>vytvorme súbor vreckove.dat, kde v kadom riadku budú všetky príjmy za odpovedajúci mesiac
		<br>- napíš poèet sledovanıch mesiacov
		<br>- napíš èíslo mesiaca, kde bol najväèší poèet príjmov
		<br>- napíš èíslo mesiaca, kde bol najmenší príjem
	<li>Napíš program na okopírovanie súboru. Program si vypıta oba názvy súborov.
	<li>Napíš program na spoèítanie poètu bajtov,písmen, èíslic a riadkov.
</ol>
	<dt><font size="+1" color="Blue">Špeciálne funkcie pre prácu so súbormi</font>
	<dd><font color="Red">int remove(subor)</font>
	<br>je to makro na zrušenie súboru, ak OK vráti nulu 0
	<br><font color="Red">int rename(stare_meno, nove_meno)</font>
	<br>je makro na premenovanie súboru
	<dl>
	<dt>Úlohy:
	<dd>Napíšte program na pridávanie èísel do usporiadaného zoznamu èísel
	<br>(kadé èíslo je na samostatnom riadku)
	<br>program bude ovládanı pomocou menu:
	<ul>
	<li>pridaj nove cislo
	<li>vypis cisel po strankach (aj s poradovımi èíslami)
	<li>zrus cislo pod por. cislom
	<li>hladaj èíslo
	<li>koniec
	</ul>
	</dl>
</dl>
<h3>Prúdy - kninica fstream.h</h3>
Podobne ako pri práci so štandartnım vstupom-klávesnicou a štandartnım vıstupom-monitor aj tu mono prácu rieši objektovo - pomocou streamov.
<dl>
<dt>Kninica
<dd>Príkazy sú v kninici fstream.h
<dt>Deklarácia
<dd>ifstream prem1; // premenná pre vstup zo súboru
	<br>ofstream prem2; // premenná pre vıstup do súboru 	
	<br>Pri deklarácii mono hneï aj otvori prepojenie na konkrétny súbor
	<br>ifstream prem1(text);
	<br>ofstream prem1(text);
	<br>V texte je adresa s názvom súboru, takto zadefinovanú premennú u netreba otvára, overenie èi sa otvorenie podarilo
	urobíme pomocou testu <b>if (prem1)</b> èo vráti <b>true</b> ak sa otvorenie podarilo.
	<br>alebo pomocou <b>if (prem1.is_open())</b>
	
<dt>Otvorenie súboru
<dd>Ak v deklarácii neuvedieme názov súboru je nutné vytvori spojenie našej premennej so súborom pomocou príkazu open.
    <br><b>prem1.open(string)</b> // v stringu je zapísanı názov súboru (prípadne aj s cestou), otvorí na èítanie
	<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ak súbor neexistuje (otvorenie sa nepodarí) môme otestova pomocou 
	<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logickej funkcie prem1.fail() alebo testom priamo premennej prem1
	<br><b>prem2.open(string)</b> // v stringu je zapísanı názov súboru (prípadne aj s cestou), otvorí na zápis
<dt>Zápis do súboru
<dd>Zápis mono robi pomocou operátora &lt;&lt; (napr. prem2 &lt;&lt; "Ahojte vsetci!") podobne ako s cout
	<br>alebo pomocou funkcie put(char) (napr. prem2.put(char))

<dt>Èítanie zo súboru
<dd><dl><dt>test vykonania operácie
		<dd><ul><li>good(prem1) - vráti 1 ak posledná operácia dopadla dobre, 0 ak zle
				<li>fail(prem1) - vráti 0 ak posledná operácia dopadla dobre, 1 ak zle
			</ul>
		<dt>Èítanie do premennej
		<dd>prem1 &gt;&gt; prem
			<dd>prem1 ... zdroj dátového toku
				<br>&gt;&gt; ... operátor, ktorı dáta z¾ava pošle cielu uvedenému vpravo
				<br>prem ... povolené typy premennıch sú znaky, texty, celé èísla a reálne èísla
				<br><br>Pozn.
				<br>operátor môme aj zreazi - prem1 &gt;&gt; a &gt;&gt; b &gt;&gt;c;
				<br>naèíta sa a potom b a nakoniec c
			<dt>Funkcie objektu prem1
			<dd><ul><li>prem1.get() - naèíta zo vstupu 1 znak a vráti ho ako návratovú hodnotu (alebo vráti EOF)
					<li>prem1.get(char prem) - naèíta zo vstupu 1 znak a zapíše ho do parametra
					<li>prem1.get(char *prem,int n) - naèíta zo vstupu text a po enter a zapíše ho do prem. Enter zostane na vstupe
						<br>Vstup je ukonèenı pri splnení niektorej z nasledujúcich podmienok:
						<ul><li>narazili sme na enter
							<li>naèítali sme u (n-1) znakov
							<li>narazili sme na EOF
						</ul>	
				<li>prem1.get(char *,int ,char) - naèíta zo vstupu text a zapíše ho do prem. 
					<br>Vstup je ukonèenı pri splnení niektorej z nasledujúcich podmienok:
					<ul><li>narazili sme na znak 3. parameter - znak z zostáva na vstupe
						<li>naèítali sme u (n-1) znakov (druhı parameter)
						<li>narazili sme na EOF
					</ul>	
				<li>prem1.getline(char *,int ) - tento príkaz nefunguje - namiesto neho pouívame príkaz getline z kninice string.
					<br>getline(stream, prem_typu_string)
					<br>Priklad:
<pre style="background-color:#eeeeee; padding:20; border-width:3; border-style:outset; width:80%" >
#include &lt;iostream>
#include &lt;string>
#include &lt;fstream>
using namespace std;
int main()
{ string s;
ifstream f("pokus.txt");
if (!f) {cout &lt;&lt;"Nenasiel som subor"; return 0;}
getline(f,s);
cout &lt;&lt;"1. riadok suboru:" &lt;&lt;s;
f.close();
return 0;}
</pre>
					<br>Vstup je ukonèenı pri splnení niektorej z nasledujúcich podmienok:
					<ul><li>narazili sme na enter (nezostane na vstupe)
						<li>narazili sme na EOF
					</ul>	
				</ul>	
		</dl>
</dl>	 
</body>
</html>
