<html>
<head>
	 <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1250">
	 <meta name="Content-language" content="sk">	
	  <LINK href="css/style.css" type="text/css" rel=stylesheet>
	<title>Smerníky</title>
</head>

<body>
V jazyku C majú smerníky dôleitejšiu úlohu ako v jazyku Pascal, viac sme nútení porozumie im, ale získame tım viac moností
práce nad dátami.
<dl><dt style="background:#ff99ff; color:#0000ff; font-size:larger">Èo je smerník
	<dd>Smerník-ukazovate¾ je premenná, do ktorej môe by zapísaná adresa. Väèšinou nás tá adresa nezaujíma, ale zaujímajú nás dáta
		zapísané na uvedenej adrese. Premenná typu smerník je (ako aj ostatné premenné) uloená v dátovom segmente (resp. zásobníku -
		ak je lokálna) ale adresa môe by z celého adresného priestoru &lt;1 ; 1M&gt;.
    <dt style="background:#ff99ff; color:#0000ff; font-size:larger">Pamä pod DOSom
	<dd>Táto èas sa priamo práci s premennımi typu smerník netıka, mono ju preskoèi, je len na objasnenie širších súvislostí.
		<table bgcolor="Silver" border="1"><tr><td colspan="2">BIOS data area
													<br>oblas dôleitıch údajov, ich náhodná zmena vedie obyèajne ku "zamrznutiu" poèítaèa
											<tr><td colspan="2">DOS data area
													<br>údaje o disku, premenné prostredia, dåka tohto priestoru je pevná
											<tr><td colspan="2">rezidenty, Command.com - prvá èas
													<br>rezidentné programy, ich adresnı priestor u nie je pevná
											<tr><td rowspan="4" width="10%" align="center">P<br>r<br>o<br>g<br>r<br>a<br>m <td>Code segment<br>kód-inštrukcie programu
											<tr>												<td>Data segment<br>dáta programu - oblas pre globálne premenné
											<tr>												<td>Stack segment<br>zásobník programu - oblas pre lokálne premenné
											<tr>												<td>Halda<br>volná pamä, program môe a nemusí obsadi, siaha max. po 640kB
											<tr><td colspan="2">Command.com - druhá èas, môe by programom prepísaná, po skonèení programu sa obnoví
											<tr><td colspan="2">Videopamä<br>od 640kB po 1MB je videopamä, obyèajne na videokarte
																		  <br>na adrese segment=0xA000, offset=0x0000 je grafická obrazovka
																		  <br>na adrese segment=0xB800, offset=0x0000 je textová obrazovka
	</table>
	Code segment, data segment sú urèené programom a ich maximálne velkosti sú dané pamäovım modelom
	<br> &nbsp; &nbsp; &nbsp;tiny - kód, dáta sú spolu a zaberajú max. 64kB 
	<br> &nbsp; &nbsp; &nbsp;small - kód max. 64kB, dáta max. 64kB
	<br> &nbsp; &nbsp; &nbsp;medium - kód max. 1MB, dáta max. 64kB
	<br> &nbsp; &nbsp; &nbsp;compact - kód max. 64kB, dáta max. 1MB
	<br> &nbsp; &nbsp; &nbsp;large - kód max. 1MB, dáta max. 1MB velkos 1 premennej max. 64kB
	<br> &nbsp; &nbsp; &nbsp;huge - kód max. 1MB, dáta max. 1MB, premenné sú neobmedzené 
	<br>ve¾kos zásobníka môme nastavi v Options (volíme od 1kB po 64kB)
	<br>ve¾kos ïalšej obsadenej pamäte môme ovplyvni príkazmi pre kompilátor 
    <dt style="background:#ff99ff; color:#0000ff; font-size:larger">Druhy smerníkov
	<dd>Poznáme:
		1. near - blízky, zaberá 2B a je v òom offsetová adresa. Implicitne sa pouíva pre malé pamäové modely.
		2. far - vzdialenı, zaberá 4B a je v òom segmentová i offsetová adresa. V rámci jedného objektu sa mení len offset.
		3. huge - rozsiahly, zaberá 4B a je v òom segmentová i offsetová adresa.
		<br><br>Pokia¾ nie je iadny z uvedenıch modifikátorov uvedenı je typ smerníka urèenı pod¾a pamäového modelu. 
		<br>
    <dt style="background:#ff99ff; color:#0000ff; font-size:larger">Halda
	<dd>Smerníkové premenné obyèajne ukazujú na:
		1. na statické systémom vytvorené premenné
		2. na objekty v halde - vo¾ná-nevyuívaná pamä, objekty vznikajú a zanikajú pod¾a programu
		V C máme 2 haldy blízku a ïalekú. 
		<br>V blízkej sa pouíva near smerník a preto je maximálne 64kB (je spoloèná s lokálnymi premennımi, ak máme ve¾ké lokálne pole blízka halda je malinká) 
		<br>V ïalekej sa pouíva far smerník a preto maximálna hranica je 1MB (obyèajne maximálne 400kB).Ide o pamä od konca programu po 1MB.
		<dl><dt style="color:red">Vytvorenie premennej v halde
			<dd><dl><dt style="color:blue"> void * malloc(int size)
					<dd>funkcia v halde alokuje predpísanı poèet bajtov a adresu na danı objekt vráti ako
						návratovú hodnotu.
						<font color="Green">
						<br>int *p;
						<br>p=(int *) malloc(10*sizeof(int)); 
						<br>//vytvori priestor pre 10 integer premennıch a adresu prvého zapíše do prem. p
						</font>
				 	<dt style="color:blue"> void * calloc(int pocet, int size)		
					<dd>funkcia v halde alokuje predpísanı poèet objektov - pocet - prièom kadı objekt má dåku
						size, celková dåka alokovanéko priestoru bude: pocet * size, adresu na danı objekt vráti ako
						návratovú hodnotu. Na rozdiel od funkcie malloc sú všetky poloky inicializované na hodnotu 0 
						preto táto funkcia je pomalšia.
						<br>int *p;
						<br>p=(int *) calloc(10,sizeof(int)); 
						<br>//vytvori priestor pre 10 integer premennıch a adresu prvého zapíše do prem. p
					<dt style="color:blue"> void * realloc(void *prem, int size)
					<dd>ak premenná prem bola vytvorená v halde funkciou malloc, resp. calloc je moné jej ve¾kos zmeni
						príkazom realloc. Dáta v nej zapísané zostávajú zachované. Ve¾kos sa môe zväèšova i zmenšova.
						Návratová hodnota je adresa na prvú poloku tohto objektu (pri zväèšovaní sa môe premiestni)	
				</dl>
			<dt style="color:red">Uvolnenie premennej z haldy
			<dd><dl><dt style="color:blue"> void  free(void * prem)
					<dd>pamä premennej prem umiestnenej v halde sa tımto uvolní
				</dl>	
		    <dt style="color:red">Zistenie vo¾ného miesta v halde
			<dd><dl><dt style="color:blue">unsigned coreleft(void)
					<dd>funkcia vráti maximálny vo¾nı úsek pamäti v halde
</dl>																			  
</body>
</html>
