<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	 <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1250">
	 <meta name="Content-language" content="sk">	
     <LINK href="css/style.css" type="text/css" rel=stylesheet>
	<title>Mysql-funkcie</title>
	 <STYLE>
	 code
	 	{color:blue;font-family:monotype;font-weight:bolder;}
	p
		{border:1; background:silver;padding:10;border-style:outset;}	
	 </STYLE>
</head>

<body>
<h2>Matematické</h2>
<code>ABS(n)</code>– absolútna hodnota čísla n<br />
<code>ACOS(n)</code> – inverzný kosínus uhla v radiánoch<br />
<code>ASIN(n)</code> – inverzný sínus uhla v radiánoch<br />
<code>ATAN(n)</code> – inverzný tangens uhla v radiánoch<br />
<code>CEILING(n)</code> – najbližšie väčšie celé číslo<br />
<code>FLOOR(n)</code> – najbližšie menšie celé číslo<br />
<code>COS(n)</code> – kosínus uhla zadaného v radiánoch<br />
<code>SIN(n)</code> – sínus uhla zadaného v radiánoch<br />
<code>TAN(n)</code> – tangens uhla zadaného v radiánoch<br />
<code>EXP(n)</code> – vráti n-tú mocninu čísla n (základ prir. logaritmu)<br />
<code>LOG(n)</code> – prirodzený logaritmus čísla n<br />
<code>LOG10(n)</code> – dekadický logaritmus čísla n<br />
<code>POWER(m, n)</code> – vráti n-tú mocninu čísla m<br />
<code>ROUND(n, m)</code> – zaokrúhli číslo n na m desatinných miest<br />
<code>SIGN(n)</code> – vráti 1 ak je n kladné, 0 ak je n rovné 0, -1 ak je n záporné<br />
<code>trunc(n[,x])</code> – orezanie čísla n na x desatinných miest, x nepovinné, ak nie je uvedené potom n je orezané na celé číslo<br />
<code>MOD(n)</code> – vráti zvyšok po celočíselnom delení
<h2>Reťazcové</h2>
Relačné operátory na porovnanie textov
<table width="60%"> 
   <tr>
      <td>=</td>
      <td>rovna sa</td>
  </tr>
  <tr>
      <td><></td>
      <td>nerovná sa</td>
  </tr>   
  <tr>
      <td><</td>
      <td>menší než</td>
  </tr>    
  <tr>
      <td>></td>
      <td>väčší než</td>
  </tr>  
</table>
<br>
Funkcie pre prácu s textom:
<br> 
<code>LOWER(retazec)</code> – konvertuje reťazec na malé písmená. Používa sa napríklad pri vyhľadávaní nezávislom na veľkosti písmen.<br /><br />
<code>UPPER(retazec)</code> – konvertuje reťazec na veľké písmená.<br /><br />
<em>Príklad:</em>
<p>
  SELECT UPPER('retazec');
	<em>//Vypíše: "RETAZEC" </em> 
</p><br />
<code>LEFT(retazec, dlzka)</code> – vráti určený počet znakov z ľavej strany (zo začiatku) reťazca. Používa sa pri ukladaní dát obmedzenej dĺžky alebo jej vrátenia, práca s prefixami alebo sufixami.<br /><br />
<em>Príklad:</em>
<p>
  SELECT LEFT('Linuxsoft',5);
  <em>//Vypíše: "Linux"</em>
</p><br />
<code>RIGHT(retazec, dlzka)</code> – vráti určený počet znakov z pravej strany (z konca) reťazca.<br /><br />
<code>TRIM(retazec)</code> – odstráni medzery z ľavej a pravej strany reťazca.<br /><br />
<em>Príklad:</em>
<p>
  SELECT TRIM(' retazec ');
	<em>//Vypíše: "retazec"</em>
</p><br />
<code>TRIM(BOTH retezec1 FROM retezec2)</code><br /><br />
<em>Príklad:</em>
<p>
  SELECT TRIM(BOTH 'a' FROM 'abeceda');
	<em>//Vypíše: "beced"</em>
</p><br />
<code>TRIM(LEADING retezec1 FROM retezec2)</code><br /><br />
<em>Príklad:</em>
<p>
  SELECT TRIM(LEADING 'a' FROM 'abeceda');
	<em>//Vypíše: "beceda"</em>
</p><br />
<code>TRIM(TRAILING retezec1 FROM retezec2)</code><br /><br />
<em>Príklad:</em>
<p>
  SELECT TRIM(TRAILING 'a' FROM 'abeceda');
	<em>//Vypíše: "abeced"</em>  
</p><br />
<code>LTRIM(retazec)</code> – odstráni medzery z ľavej strany (zo začiatku) reťazca.<br /><br />
<em>Príklad:</em>
<p>
  SELECT LTRIM(' retazec ');
	<em>//Vypíše: "retazec "</em> 
</p><br />
<code>RTRIM(retazec)</code> – odstráni medzery z pravej strany (z konca) reťazca.<br /><br />
<code>REPLACE(retazec1, retazec2, [retazec3] )</code> – každý výskyt reťazca2 v reťazci1 nahradí reťazcom3 (resp. vymaže).<br /><br />
<em>Príklad:</em>
<p>
  SELECT REPLACE("Dobrý sen", "sen", "deň");
	<em>//Vypíše: "Dobrý deň"</em> 
</p><br />
<code>SUBSTRING(retazec, zaciatok, dlzka)</code> – vráti podmnožinu vstupného reťazca definovanú začiatkom a počtom znakov.<br /><br />
<em>Príklad:</em>
<p>
  SELECT SUBSTRING('okovy',2,3);
	<em>//Vypíše: "kov"</em>  
</p><br />
<code>LENGTH(retezec)</code> – vracia dĺžku reťazca.<br /><br />
<em>Príklad:</em>
<p>
  SELECT LENGTH('retazec');
	<em>//Vracia: 7</em>  
</p><br />
<code>REVERSE(retezec)</code> – vracia reťazec, v ktorom sú znaky v opačnom poradí. Vracia NULL, pokiaľ je NULL.<br /><br />
<em>Príklad:</em>
<p>
  SELECT REVERSE('retazec');
	<em>//Vypíše: "cezater"</em>  
</p><br />
<code>ASCII(retezec)</code> – vracia ASCII kód prvého znaku reťazca zľava. Vracia hodnotu 0, ak je reťazec prázdny, a NULL, ak je reťazec NULL.<br /><br />
<em>Príklad:</em>
<p>
  SELECT ASCII('abc'); 
	<em>//Vypíše: 97</em> 
</p><br />
<code>BIN(n)</code> – vracia hodnotu n v binárnom tvare ako reťazec.<br /><br />
<em>Príklad:</em>
<p>
  SELECT BIN(2); 
	<em>//Vypíše: 10</em>  
</p><br />
<code>CHAR(n1,n2,...)</code> – interpretuje argumenty ako kódy ASCII a vracia reťazec obsahujúci zreťazenie týchto kódov. Argumenty NULL sa ignorujú.<br /><br />
<em>Príklad:</em>
<p>
  SELECT CHAR(89,56,80); 
	<em>//Vypíše: Y8P</em>  
</p><br />

<code>HEX</code> – vracia hexadecimálný reťazec.<br /><br />
<em>Príklad:</em>
<p>
  SELECT HEX(255); 
	<em>//Vypíše: FF</em>  
</p>
<h2>Logické</h2>
Logické operácie v podmienkach príkazu <code>SELECT</code> sú tesne zviazané s matematickými a textovými operáciami. 
Pomocou logických operandov môžeme spájať niekoľko podmienok do jedného príkazu. Obecný popis príkazu <code>SELECT</code> 
s využítím logických operácií vyzerá nasledovne:
<br>
<em>Syntax:</em>
<p>
  SELECT zoznam_poloziek FROM nazov_tabulky WHERE podmienka_1 LOGICKY_OPERAND podmienka_n;
</p>
<div>Za logický operand môžeme dosadiť:<br />
<code>AND<br />
OR<br />
NOT </code><br />
<br>Tieto typy podmienok sa dajú aj skombinovať a tvoriť zložitejšie podmienky.
<br>Často potrebujeme z tabuľky vybrať záznamy, kde vyberaná hodnota je prvkom nejakého zoznamu. Na to nám slúži operand <code>OR</code>. 
Ak by sme mali v tabuľke "údaje" atribút mesto a chceli by sme vyfiltrovať osoby z poľa mesto môžeme to spraviť nasledovným príkazom:
</div>
<em>Príklad:</em>
<p>
  SELECT * FROM udaje WHERE mesto = 'Nitra' OR mesto = 'Bratislava' OR mesto = 'Kosice';  
</p>
<div>Príkaz bude fungovať, ale vieme to napísať aj elegantnejšie pomocou <code>IN</code>.</div>
<em>Príklad:</em>
<p>
  SELECT * FROM udaje WHERE mesto IN ('Nitra', 'Bratislava', 'Kosice'); 
</p>
<div>Takto zostavený zoznam sa oveľa lepšie číta a udržuje.</div><br /><br />
<div>Pomocou operandu <code>AND</code> si ako príklad vypíšeme osoby, ktorých vek je menší než 30 a väčší ako 40 rokov.</div>
<em>Príklad:</em>
<p>
  SELECT * FROM udaje WHERE vek &gt; 30 AND vek &lt; 40;  
</p>
<div>Parameter <code>BETWEEN ... AND</code> v podmienke <code>WHERE</code> určuje interval platnosti. 
</div>
<em>Príklad:</em>
<p>
  SELECT * FROM udaje WHERE vek BETWEEN 30 AND 40;
</p>
<div>Oba príkazy sú zhodné a vypíšu nasledovnú tabuľku:</div>
<table width="50%" border="1"> 
  <tr> 
      <th>id</th> 
      <th>meno</th> 
      <th>priezvisko</th> 
      <th>vek</th> 
      <th>telefon</th> 
  </tr>
  <tr>
      <td>5</td>
      <td>Jan</td>
      <td>Novak</td>
      <td>37</td>
      <td>0904666456</td>
  </tr> 
</table>
<h2>Agregačné funkcie</h2>
<div>Agregačné funkcie sú typy dopytov, ktoré spracovávajú hodnoty z celých stĺpcov tabuľky. 
	Zadávame ich do zoznamu výstupných položiek za príkaz <code>SELECT</code>.</div>
<p>
<code>AVG(nazov_stĺpca) </code>– vráti aritmetický priemer z množiny hodnôt v stĺpci<br />
<code>COUNT(DISTINCT nazov_stĺpca)</code> – spočíta počet jedinečných hodnôt v stĺpci<br />
<code>COUNT(nazov_stĺpca)</code> – spočíta počet hodnôt v stĺpci<br />
<code>MAX(nazov_stĺpca)</code> – vráti maximálnu hodnotu z množiny údajov<br />
<code>MIN(nazov_stĺpca)</code> – vráti minimálnu hodnotu z množiny údajov<br />
<code>SUM(nazov_stĺpca)</code> – vráti súčet hodnôt v množine údajov<br />
<code>STD(nazov_stĺpca)</code> – vykoná súčet číselných hodnôt v stĺpci<br />
<code>VAR([DISTINCT | ALL] nazov_stĺpca)</code> – vráti varianciu pre skupinu záznamov<br />
<code>STDEV([DISTINCT | ALL] nazov_stĺpca)</code> – vráti štandardnú odchýlku (odmocninu z variancie) pre skupinu záznamov.</p><br />
&nbsp;
<h3>AVG (nazov_stĺpca)</h3>

<div>Ak chceme zistiť priemerný vek v našej tabuľke, samozrejme za predpokladu, že naša tabuľka obsahuje údaj o veku jednotlivých záznamov, 
použijeme príkaz <code>AVG</code>. Položky s hodnotou Null sa neuvažujú. Príkaz SELECT bude potom vyzerať nasledovne:</div>
<em>Príklad:</em>
<p>
  SELECT AVG(vek) FROM udaje;
</p><br />

<h3>COUNT</h3>
<p>Pre spočítanie všetkých údajov v tabuľke použijeme príkaz <code>COUNT</code>. Nasledovným príkazom si zistíme počet zadefinovaných záznamov v tabuľke.</p>
<em>Príklad:</em>
<p class="code">
  SELECT COUNT(*) FROM udaje;
</p><br />
<div>Ak by sme si do tabuľky pridali atribúty "usek" a "funkcia" a chceli by sme určiť zoznam úsekov a koľko osôb pracuje na akých funkciách 
na jednotlivých oddeleniach urobíme to nasledovne:</div>
<em>Príklad:</em>
<p>
  SELECT usek, funkcia, COUNT() as 'pocet' FROM udaje GROUP BY usek, funkcia;
</p><br />
<table width="50%" border="1"> 
  <tr> <th>usek<th>funkcia<th>pocet</tr>
  <tr> <td rowspan="3">ekonomicky<td>riaditel<td>2</tr>
  <tr> 							 <td>asistent<td>1</tr>
  <tr> 							 <td>uctovnik<td>7</tr> 
  <tr> <td rowspan="3">obchodny<td>riaditel<td>1</tr>
  <tr>    						<td>asistent<td>1</tr>
  <tr> 							<td>uctovnik<td>0</tr>  
</table><br />

<div>Vo viacvrstvovej agregácii záleží na poradí zložiek agregačného kľúča. 
	Ak toto poradie z predchádzajúceho príkladu obrátime, potom dostaneme odlišný výstup ako ukazuje nasledujúca tabuľka:
</div>
<em>Príklad:</em>
<p>
  SELECT funkcia, usek COUNT() as 'pocet' FROM udaje GROUP BY funkcia, usek;
</p><br />

<table width="50%" border="1"> 
  <tr> <th>funkcia<th>usek<th>pocet</tr>
  <tr> <td rowspan="2">riaditel<td>ekonomicky<td>2</tr>
  <tr>    						<td>obchodny<td>1</tr>
  <tr>	<td rowspan="2">asistent<td>ekonomicky<td>1</tr>
  <tr> 							<td>obchodny<td>1</tr>
  <tr>  <td rowspan="2">uctovnik<td>ekonomicky<td>7</tr>
  <tr>  						<td>obchodny<td>0</tr>
</table><br /><br />

<h3>SUM</h3>
<div>Ako príklad si spočítame napríklad roky všetkých osôb v tabuľke.</div>
<em>Príklad:</em>
<p class="code">
  SELECT SUM(vek) as 'vek_spolu' FROM udaje;
</p>
<table> 
  <tr> 
      <th>vek_spolu</th> 
  </tr>
  <tr>
      <td>152</td>
  </tr>
</table>
<br /><br />

<h3>MIN a MAX</h3>
<div>Ako príklad si zistíme najnižší a najvyšší vek v tabuľke.</div>
<em>Príklad:</em>
<p class="code">
  SELECT MIN(vek) as 'min_vek', MAX(vek) as 'max_vek' FROM udaje;
</p><br />
<table> 
  <tr> 
      <th>min_vek</th> 
      <th>max_vek</th> 
  </tr>
  <tr>
      <td>21</td>
      <td>45</td>
  </tr>
</table>

</body>
</html>
