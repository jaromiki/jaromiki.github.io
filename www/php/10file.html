<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	 <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1250">	
	  <LINK href="css/style.css" type="text/css" rel=stylesheet>
	<title>Práca so súbormi</title>
</head>

<body>
<h2>Prístupové práva</h2>
Keïe vaše PHP bude bea asi na našom LINUX serveri, je dobré si poveda základy o prístupovıch právach.
Kadı súbor, prieèinok má svojho majite¾a, ten má zvyèajne všetky práva a môe s ním robi všetko. Práva sa 
pridelujú v trojiciach rwx rwx rwx. Prvá trojica sa tıka majite¾a, druhá èlenov skupiny/priate¾ov a tretia
sa tıka ostatnıch- internetovıch návštevníkov.
<br><b>Súbory</b>
<ul><li>r - znamená právo èítania, v èom je aj právo kopírovania
	<li>w - znamená právo zapisovania, èo je právo zmeni súbor (nie vymaza)
	<li>x - právo spusti, èo pre nás teraz nemá zmysel nastavova
</ul>	 
<br><b>Prieèinok</b>
<ul><li>r - znamená právo èítania, v èom je právo získa vıpis obsahu prieèinka
	<li>w - znamená právo zapisovania, èo je právo vytvára a ruši súbory 
	<li>x - právo vojs, to je základné právo, ktoré musí by nastavené
</ul>	 
<br>Poznámka
<br>Ak súbor/prieèinok vytvárame pomocou príkazov PHP tak PHP je majite¾ tohto objektu a zvyèajne má nad ním všetky práva
<br><br>
<h2>Rozbalenie naèítanıch dát</h2>
Èasto zo súboru naèítame viaceré hodnoty oddelené od seba napr. bodkoèiarkou, my chceme tieto poloky z textu naèíta do po¾a
èo je vıhodné urobi príkazom 
<br><b>array explode (string separator, string string)</b> 
<ul><li>separator - zadáme pouitı oddelovaè
	<li>string - zdrojovı text
</ul>
Vısledkom je pole s oddelenımi polokami
<br>
<br>Na opaènı efekt pouijeme príkaz 
<br><b>string implode (string glue, array pieces)</b>	 
<ul><li>glue - oddelovaè, ktorı bude vkladanı do textu
	<li>pieses - pole stringov
</ul>
Vráti text s pouitımi polokami po¾a medzi nimi je vloenı oddelovaè.	
<br><br>
<h2>Práca s textovımi súbormi</h2>
<b>file(subor)</b>
Najjednoduchšie je naèíta celı súbor do jedného po¾a stringov. Kadá veta je naèítaná do jednej poloky po¾a.
<table border="1">
<tr><th bgcolor="Silver">Subor.txt<th bgcolor="Silver">Program na vıpis súboru</tr>
<tr valign="top"><td bgcolor="White">
<code><pre>
prvy riadok
druhı riadok
tretí riadok

piaty riadok - štvrtı je prázdny
</code></pre>
<td bgcolor="White">
<code><pre>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
&lt;html>
&lt;head>
	 &lt;META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1250">	
	 &lt;LINK href="css/style.css" type="text/css" rel=stylesheet>
	&lt;title>Vypis suboru subor.txt</title>
&lt;/head>

&lt;body>

&lt;?php
  $pole=file('subor.txt');
  for ($i=0; $i&lt;count($pole);$i++)
         echo $pole[$i].'&lt;br>'; 
?>
toto je hned pod vypisom
&lt;/body>
&lt;/html>
</code></pre>
</tr>
</table>
<br><br>
<h2>Práca so súbormi</h2>
Teraz si ukáeme ako naèítava/vytvára súbor po znakoch, vetách. Tento spôsob je benejší a pouíva sa jaqk v pascale tak i jazyku C. 
Práca spoèíva v etapách:
<ul style="margin-left:25"><li>otvorenie
	<li>èítanie/zápis
	<li>zatvorenie
</ul>
Èíta mono len z otvoreného súboru.	
<dl><dt>int fopen(string filename, string mode)
	<dd><b>filename</b> - meno súboru
		<br>ak meno zaèína textom "http://" otvorí sa spojenie na špecifikovanı server
		<br>ak meno zaèína textom "php://stdin" alebo "php://stdout" alebo "php://stderr" tak je otvorenı štandartnı stream
		<br>inak otvorí súbor z file systému 
		<br><b>mode</b> - spôsob otvorenia súboru
		<ul><li> "r" - na èítanie, ukazovate¾ nastaví na zaèiatok
			<li> "r+" - na èítanie a zápis, ukazovate¾ na zaèiatok
			<li> "w" - na zápis, súbor skráti na nulovú dåku, ak neexistuje tak vytvorí
			<li> "w+" - na zápis a èítanie, súbor skráti na nulovú dåku, ak neexistuje tak vytvorí
			<li> "a" - na zápis, ukazovate¾ dá za poslednú vetu 
			<li> "a+" - na zápis a èítanie, ukazovate¾ dá za poslednú vetu 
		</ul>	
		<b>návratová hodnota</b> - ak sa otvorenie nepodarilo vráti false (0), inak vráti ukazovate¾ na súbor.
	<dt>int ftell (int fp) - vráti polohu ukaovate¾a v súbore
	<dd><b>tp</b> - návratová hodnota pri otváraní súboru
	<dt>int fseek (int fp, int offset [, int whence])
	<dd>Nastaví pozíciu v súbore
		<b>fp</b> - návratová hodnota pri otváraní súboru
		<br><b>offset</b> - kam sa má ukazovate¾ posunú
		<br><b>whence</b> <ul><li>SEEK_SET - Nastaví pozíciu v bajtoch od zaèiatku súboru. Default.
								<li>SEEK_CUR - Nastaví pozíciu v bajtoch od súèasnej pozície.
								<li>SEEK_END - Nastaví pozíciu v bajtoch od konca súboru.
							</ul>
		<br><b>návratovaá hodnota</b> - ak OK vráti 0, inak vráti -1					
		<br>Ak vybehneme za eof alebo pred súbor nastane chyba		
	<dt>int rewind (int fp)
	<dd><b>tp</b> - návratová hodnota pri otváraní súboru
		<br>Nastaví ukazovate¾ na zaèiatok súboru
		<b>návratovaá hodnota</b> - ak nastane chyba vráti 0	
	<dt>int feof (int fp)
	<dd>zistí, èi sme na konci súboru, ak áno vráti true inak false 
	<dt>string fgetc (int fp)
	<dd>Naèíta a vráti reazec dåky 1 znak, ak sme na konci súboru vráti false
	<dt>array fgetcsv (int fp, int length [, string delimiter])
	<dd>Naèíta jednu vetu a potrhá ju do poloiek po¾a pod¾a urèeného odde¾ovaèa
		<br>fp</b> - návratová hodnota pri otváraní súboru
		<br><b>length</b> - maximálna dåka vety
		<br><b>delimiter</b> - štandartne je èiarka, môme nastavi inı
		<br>Ak je veta prázdna, chyba nenastane - vráti pole s poètom poloiek 0
	<dt>string fgets (int fp, int length)
	<dd>Naèíta do stringu jednu vetu
		<br>fp</b> - návratová hodnota pri otváraní súboru
		<br><b>length</b> - maximálna dåka vety
	<dt>int fputs (int fp, string str [, int length])
	<dt>int fwrite (int fp, string string [, int length])
	<dd>Oba príkazy zapíšu jednu vetu do súboru
		<b>tp</b> - návratová hodnota pri otváraní súboru
		<b>string</b> - zapisovanı string
		<br><b>length</b> - maximálna dåka vety
	<dt>int ftruncate (int fp, int size)
	<dd>skráti súbor na urèenú dåku	
	<dt>int fclose (int fp)
	<dd>zavrie príslušnı súbor	
</dl>
Ešte nieko¾ko príkazov, ktoré sa pouívajú na nie otvorené súbory.
<dl><dt>int unlink (string filename)
	<dd>zruší/vymae urèenı súbor z file systému
	<dt>int mkdir (string pathname, int mode)
	<dd>vytvorí prieèinok - pathname môe obsahova aj cestu
		<br><b>mode</b> - nastavíme práva pre prieèinok (napr. 0700) zadávame v osmièkovej sústave
	<dt>int rmdir (string dirname)
	<dd>odstráni urèenı prieèinok - musí by prázdny
	<dt>int chdir (string directory)
	<dd>presun do prieèinka
	<dt>int copy (string source, string dest)
	<dd>okopíruje súbor do iného, vráti true ak sa podarí
	<dt>int file_exists (string filename)
	<dd>test na existenciu súboru
	<dt>int rename (string oldname, string newname)
	<dd>Premenovanie súboru, vráti true ak sa podarí
</dl>	
		  
</dl>
		
</body>
</html>
